"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "buildSortParam", {
    enumerable: true,
    get: function() {
        return buildSortParam;
    }
});
const _getLocalizedSortProperty = require("./getLocalizedSortProperty");
const buildSortParam = ({ config, fields, locale, sort, timestamps })=>{
    let sortProperty;
    let sortDirection = 'desc';
    if (!sort) {
        if (timestamps) {
            sortProperty = 'createdAt';
        } else {
            sortProperty = '_id';
        }
    } else if (sort.indexOf('-') === 0) {
        sortProperty = sort.substring(1);
    } else {
        sortProperty = sort;
        sortDirection = 'asc';
    }
    if (sortProperty === 'id') {
        sortProperty = '_id';
    } else {
        sortProperty = (0, _getLocalizedSortProperty.getLocalizedSortProperty)({
            config,
            fields,
            locale,
            segments: sortProperty.split('.')
        });
    }
    return {
        [sortProperty]: sortDirection
    };
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9xdWVyaWVzL2J1aWxkU29ydFBhcmFtLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgUGFnaW5hdGVPcHRpb25zIH0gZnJvbSAnbW9uZ29vc2UnXG5pbXBvcnQgdHlwZSB7IFNhbml0aXplZENvbmZpZyB9IGZyb20gJ3BheWxvYWQvY29uZmlnJ1xuaW1wb3J0IHR5cGUgeyBGaWVsZCB9IGZyb20gJ3BheWxvYWQvdHlwZXMnXG5cbmltcG9ydCB7IGdldExvY2FsaXplZFNvcnRQcm9wZXJ0eSB9IGZyb20gJy4vZ2V0TG9jYWxpemVkU29ydFByb3BlcnR5J1xuXG50eXBlIEFyZ3MgPSB7XG4gIGNvbmZpZzogU2FuaXRpemVkQ29uZmlnXG4gIGZpZWxkczogRmllbGRbXVxuICBsb2NhbGU6IHN0cmluZ1xuICBzb3J0OiBzdHJpbmdcbiAgdGltZXN0YW1wczogYm9vbGVhblxufVxuXG5leHBvcnQgdHlwZSBTb3J0QXJncyA9IHtcbiAgZGlyZWN0aW9uOiBTb3J0RGlyZWN0aW9uXG4gIHByb3BlcnR5OiBzdHJpbmdcbn1bXVxuXG5leHBvcnQgdHlwZSBTb3J0RGlyZWN0aW9uID0gJ2FzYycgfCAnZGVzYydcblxuZXhwb3J0IGNvbnN0IGJ1aWxkU29ydFBhcmFtID0gKHtcbiAgY29uZmlnLFxuICBmaWVsZHMsXG4gIGxvY2FsZSxcbiAgc29ydCxcbiAgdGltZXN0YW1wcyxcbn06IEFyZ3MpOiBQYWdpbmF0ZU9wdGlvbnNbJ3NvcnQnXSA9PiB7XG4gIGxldCBzb3J0UHJvcGVydHk6IHN0cmluZ1xuICBsZXQgc29ydERpcmVjdGlvbjogU29ydERpcmVjdGlvbiA9ICdkZXNjJ1xuXG4gIGlmICghc29ydCkge1xuICAgIGlmICh0aW1lc3RhbXBzKSB7XG4gICAgICBzb3J0UHJvcGVydHkgPSAnY3JlYXRlZEF0J1xuICAgIH0gZWxzZSB7XG4gICAgICBzb3J0UHJvcGVydHkgPSAnX2lkJ1xuICAgIH1cbiAgfSBlbHNlIGlmIChzb3J0LmluZGV4T2YoJy0nKSA9PT0gMCkge1xuICAgIHNvcnRQcm9wZXJ0eSA9IHNvcnQuc3Vic3RyaW5nKDEpXG4gIH0gZWxzZSB7XG4gICAgc29ydFByb3BlcnR5ID0gc29ydFxuICAgIHNvcnREaXJlY3Rpb24gPSAnYXNjJ1xuICB9XG5cbiAgaWYgKHNvcnRQcm9wZXJ0eSA9PT0gJ2lkJykge1xuICAgIHNvcnRQcm9wZXJ0eSA9ICdfaWQnXG4gIH0gZWxzZSB7XG4gICAgc29ydFByb3BlcnR5ID0gZ2V0TG9jYWxpemVkU29ydFByb3BlcnR5KHtcbiAgICAgIGNvbmZpZyxcbiAgICAgIGZpZWxkcyxcbiAgICAgIGxvY2FsZSxcbiAgICAgIHNlZ21lbnRzOiBzb3J0UHJvcGVydHkuc3BsaXQoJy4nKSxcbiAgICB9KVxuICB9XG5cbiAgcmV0dXJuIHsgW3NvcnRQcm9wZXJ0eV06IHNvcnREaXJlY3Rpb24gfVxufVxuIl0sIm5hbWVzIjpbImJ1aWxkU29ydFBhcmFtIiwiY29uZmlnIiwiZmllbGRzIiwibG9jYWxlIiwic29ydCIsInRpbWVzdGFtcHMiLCJzb3J0UHJvcGVydHkiLCJzb3J0RGlyZWN0aW9uIiwiaW5kZXhPZiIsInN1YnN0cmluZyIsImdldExvY2FsaXplZFNvcnRQcm9wZXJ0eSIsInNlZ21lbnRzIiwic3BsaXQiXSwibWFwcGluZ3MiOiI7Ozs7K0JBcUJhQTs7O2VBQUFBOzs7MENBakI0QjtBQWlCbEMsTUFBTUEsaUJBQWlCLENBQUMsRUFDN0JDLE1BQU0sRUFDTkMsTUFBTSxFQUNOQyxNQUFNLEVBQ05DLElBQUksRUFDSkMsVUFBVSxFQUNMO0lBQ0wsSUFBSUM7SUFDSixJQUFJQyxnQkFBK0I7SUFFbkMsSUFBSSxDQUFDSCxNQUFNO1FBQ1QsSUFBSUMsWUFBWTtZQUNkQyxlQUFlO1FBQ2pCLE9BQU87WUFDTEEsZUFBZTtRQUNqQjtJQUNGLE9BQU8sSUFBSUYsS0FBS0ksT0FBTyxDQUFDLFNBQVMsR0FBRztRQUNsQ0YsZUFBZUYsS0FBS0ssU0FBUyxDQUFDO0lBQ2hDLE9BQU87UUFDTEgsZUFBZUY7UUFDZkcsZ0JBQWdCO0lBQ2xCO0lBRUEsSUFBSUQsaUJBQWlCLE1BQU07UUFDekJBLGVBQWU7SUFDakIsT0FBTztRQUNMQSxlQUFlSSxJQUFBQSxrREFBd0IsRUFBQztZQUN0Q1Q7WUFDQUM7WUFDQUM7WUFDQVEsVUFBVUwsYUFBYU0sS0FBSyxDQUFDO1FBQy9CO0lBQ0Y7SUFFQSxPQUFPO1FBQUUsQ0FBQ04sYUFBYSxFQUFFQztJQUFjO0FBQ3pDIn0=