"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "createGlobal", {
    enumerable: true,
    get: function() {
        return createGlobal;
    }
});
const _sanitizeInternalFields = /*#__PURE__*/ _interop_require_default(require("./utilities/sanitizeInternalFields"));
const _withSession = require("./withSession");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
const createGlobal = async function createGlobal({ data, req = {}, slug }) {
    const Model = this.globals;
    const global = {
        globalType: slug,
        ...data
    };
    const options = (0, _withSession.withSession)(this, req.transactionID);
    let [result] = await Model.create([
        global
    ], options);
    result = JSON.parse(JSON.stringify(result));
    // custom id type reset
    result.id = result._id;
    result = (0, _sanitizeInternalFields.default)(result);
    return result;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jcmVhdGVHbG9iYWwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBDcmVhdGVHbG9iYWwgfSBmcm9tICdwYXlsb2FkL2RhdGFiYXNlJ1xuaW1wb3J0IHR5cGUgeyBQYXlsb2FkUmVxdWVzdCB9IGZyb20gJ3BheWxvYWQvdHlwZXMnXG5cbmltcG9ydCB0eXBlIHsgTW9uZ29vc2VBZGFwdGVyIH0gZnJvbSAnLidcblxuaW1wb3J0IHNhbml0aXplSW50ZXJuYWxGaWVsZHMgZnJvbSAnLi91dGlsaXRpZXMvc2FuaXRpemVJbnRlcm5hbEZpZWxkcydcbmltcG9ydCB7IHdpdGhTZXNzaW9uIH0gZnJvbSAnLi93aXRoU2Vzc2lvbidcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUdsb2JhbDogQ3JlYXRlR2xvYmFsID0gYXN5bmMgZnVuY3Rpb24gY3JlYXRlR2xvYmFsKFxuICB0aGlzOiBNb25nb29zZUFkYXB0ZXIsXG4gIHsgZGF0YSwgcmVxID0ge30gYXMgUGF5bG9hZFJlcXVlc3QsIHNsdWcgfSxcbikge1xuICBjb25zdCBNb2RlbCA9IHRoaXMuZ2xvYmFsc1xuICBjb25zdCBnbG9iYWwgPSB7XG4gICAgZ2xvYmFsVHlwZTogc2x1ZyxcbiAgICAuLi5kYXRhLFxuICB9XG4gIGNvbnN0IG9wdGlvbnMgPSB3aXRoU2Vzc2lvbih0aGlzLCByZXEudHJhbnNhY3Rpb25JRClcblxuICBsZXQgW3Jlc3VsdF0gPSAoYXdhaXQgTW9kZWwuY3JlYXRlKFtnbG9iYWxdLCBvcHRpb25zKSkgYXMgYW55XG5cbiAgcmVzdWx0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZXN1bHQpKVxuXG4gIC8vIGN1c3RvbSBpZCB0eXBlIHJlc2V0XG4gIHJlc3VsdC5pZCA9IHJlc3VsdC5faWRcbiAgcmVzdWx0ID0gc2FuaXRpemVJbnRlcm5hbEZpZWxkcyhyZXN1bHQpXG5cbiAgcmV0dXJuIHJlc3VsdFxufVxuIl0sIm5hbWVzIjpbImNyZWF0ZUdsb2JhbCIsImRhdGEiLCJyZXEiLCJzbHVnIiwiTW9kZWwiLCJnbG9iYWxzIiwiZ2xvYmFsIiwiZ2xvYmFsVHlwZSIsIm9wdGlvbnMiLCJ3aXRoU2Vzc2lvbiIsInRyYW5zYWN0aW9uSUQiLCJyZXN1bHQiLCJjcmVhdGUiLCJKU09OIiwicGFyc2UiLCJzdHJpbmdpZnkiLCJpZCIsIl9pZCIsInNhbml0aXplSW50ZXJuYWxGaWVsZHMiXSwibWFwcGluZ3MiOiI7Ozs7K0JBUWFBOzs7ZUFBQUE7OzsrRUFIc0I7NkJBQ1A7Ozs7OztBQUVyQixNQUFNQSxlQUE2QixlQUFlQSxhQUV2RCxFQUFFQyxJQUFJLEVBQUVDLE1BQU0sQ0FBQyxDQUFtQixFQUFFQyxJQUFJLEVBQUU7SUFFMUMsTUFBTUMsUUFBUSxJQUFJLENBQUNDLE9BQU87SUFDMUIsTUFBTUMsU0FBUztRQUNiQyxZQUFZSjtRQUNaLEdBQUdGLElBQUk7SUFDVDtJQUNBLE1BQU1PLFVBQVVDLElBQUFBLHdCQUFXLEVBQUMsSUFBSSxFQUFFUCxJQUFJUSxhQUFhO0lBRW5ELElBQUksQ0FBQ0MsT0FBTyxHQUFJLE1BQU1QLE1BQU1RLE1BQU0sQ0FBQztRQUFDTjtLQUFPLEVBQUVFO0lBRTdDRyxTQUFTRSxLQUFLQyxLQUFLLENBQUNELEtBQUtFLFNBQVMsQ0FBQ0o7SUFFbkMsdUJBQXVCO0lBQ3ZCQSxPQUFPSyxFQUFFLEdBQUdMLE9BQU9NLEdBQUc7SUFDdEJOLFNBQVNPLElBQUFBLCtCQUFzQixFQUFDUDtJQUVoQyxPQUFPQTtBQUNUIn0=