"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    slateEditor: function() {
        return slateEditor;
    },
    ElementButton: function() {
        return _Button.default;
    },
    toggleElement: function() {
        return _toggle.default;
    },
    LeafButton: function() {
        return _Button1.default;
    },
    nodeIsTextNode: function() {
        return _types.nodeIsTextNode;
    }
});
const _utilities = require("payload/utilities");
const _cell = /*#__PURE__*/ _interop_require_default(require("./cell"));
const _richTextRelationshipPromise = require("./data/richTextRelationshipPromise");
const _validation = require("./data/validation");
const _field = /*#__PURE__*/ _interop_require_default(require("./field"));
const _Button = /*#__PURE__*/ _interop_require_default(require("./field/elements/Button"));
const _toggle = /*#__PURE__*/ _interop_require_default(require("./field/elements/toggle"));
const _Button1 = /*#__PURE__*/ _interop_require_default(require("./field/leaves/Button"));
const _types = require("./types");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function slateEditor(args) {
    return {
        CellComponent: (0, _utilities.withMergedProps)({
            Component: _cell.default,
            toMergeIntoProps: args
        }),
        FieldComponent: (0, _utilities.withMergedProps)({
            Component: _field.default,
            toMergeIntoProps: args
        }),
        outputSchema: ({ isRequired })=>{
            return {
                items: {
                    type: 'object'
                },
                type: (0, _utilities.withNullableJSONSchemaType)('array', isRequired)
            };
        },
        populationPromise ({ context, currentDepth, depth, field, findMany, flattenLocales, overrideAccess, populationPromises, req, showHiddenFields, siblingDoc }) {
            if (field.admin?.elements?.includes('relationship') || field.admin?.elements?.includes('upload') || field.admin?.elements?.includes('link') || !field?.admin?.elements) {
                return (0, _richTextRelationshipPromise.richTextRelationshipPromise)({
                    context,
                    currentDepth,
                    depth,
                    field,
                    findMany,
                    flattenLocales,
                    overrideAccess,
                    populationPromises,
                    req,
                    showHiddenFields,
                    siblingDoc
                });
            }
            return null;
        },
        validate: _validation.richTextValidate
    };
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IFJpY2hUZXh0QWRhcHRlciB9IGZyb20gJ3BheWxvYWQvdHlwZXMnXG5cbmltcG9ydCB7IHdpdGhNZXJnZWRQcm9wcywgd2l0aE51bGxhYmxlSlNPTlNjaGVtYVR5cGUgfSBmcm9tICdwYXlsb2FkL3V0aWxpdGllcydcblxuaW1wb3J0IHR5cGUgeyBBZGFwdGVyQXJndW1lbnRzIH0gZnJvbSAnLi90eXBlcydcblxuaW1wb3J0IFJpY2hUZXh0Q2VsbCBmcm9tICcuL2NlbGwnXG5pbXBvcnQgeyByaWNoVGV4dFJlbGF0aW9uc2hpcFByb21pc2UgfSBmcm9tICcuL2RhdGEvcmljaFRleHRSZWxhdGlvbnNoaXBQcm9taXNlJ1xuaW1wb3J0IHsgcmljaFRleHRWYWxpZGF0ZSB9IGZyb20gJy4vZGF0YS92YWxpZGF0aW9uJ1xuaW1wb3J0IFJpY2hUZXh0RmllbGQgZnJvbSAnLi9maWVsZCdcblxuZXhwb3J0IGZ1bmN0aW9uIHNsYXRlRWRpdG9yKFxuICBhcmdzOiBBZGFwdGVyQXJndW1lbnRzLFxuKTogUmljaFRleHRBZGFwdGVyPGFueVtdLCBBZGFwdGVyQXJndW1lbnRzLCBBZGFwdGVyQXJndW1lbnRzPiB7XG4gIHJldHVybiB7XG4gICAgQ2VsbENvbXBvbmVudDogd2l0aE1lcmdlZFByb3BzKHtcbiAgICAgIENvbXBvbmVudDogUmljaFRleHRDZWxsLFxuICAgICAgdG9NZXJnZUludG9Qcm9wczogYXJncyxcbiAgICB9KSxcbiAgICBGaWVsZENvbXBvbmVudDogd2l0aE1lcmdlZFByb3BzKHtcbiAgICAgIENvbXBvbmVudDogUmljaFRleHRGaWVsZCxcbiAgICAgIHRvTWVyZ2VJbnRvUHJvcHM6IGFyZ3MsXG4gICAgfSksXG4gICAgb3V0cHV0U2NoZW1hOiAoeyBpc1JlcXVpcmVkIH0pID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGl0ZW1zOiB7XG4gICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgIH0sXG4gICAgICAgIHR5cGU6IHdpdGhOdWxsYWJsZUpTT05TY2hlbWFUeXBlKCdhcnJheScsIGlzUmVxdWlyZWQpLFxuICAgICAgfVxuICAgIH0sXG4gICAgcG9wdWxhdGlvblByb21pc2Uoe1xuICAgICAgY29udGV4dCxcbiAgICAgIGN1cnJlbnREZXB0aCxcbiAgICAgIGRlcHRoLFxuICAgICAgZmllbGQsXG4gICAgICBmaW5kTWFueSxcbiAgICAgIGZsYXR0ZW5Mb2NhbGVzLFxuICAgICAgb3ZlcnJpZGVBY2Nlc3MsXG4gICAgICBwb3B1bGF0aW9uUHJvbWlzZXMsXG4gICAgICByZXEsXG4gICAgICBzaG93SGlkZGVuRmllbGRzLFxuICAgICAgc2libGluZ0RvYyxcbiAgICB9KSB7XG4gICAgICBpZiAoXG4gICAgICAgIGZpZWxkLmFkbWluPy5lbGVtZW50cz8uaW5jbHVkZXMoJ3JlbGF0aW9uc2hpcCcpIHx8XG4gICAgICAgIGZpZWxkLmFkbWluPy5lbGVtZW50cz8uaW5jbHVkZXMoJ3VwbG9hZCcpIHx8XG4gICAgICAgIGZpZWxkLmFkbWluPy5lbGVtZW50cz8uaW5jbHVkZXMoJ2xpbmsnKSB8fFxuICAgICAgICAhZmllbGQ/LmFkbWluPy5lbGVtZW50c1xuICAgICAgKSB7XG4gICAgICAgIHJldHVybiByaWNoVGV4dFJlbGF0aW9uc2hpcFByb21pc2Uoe1xuICAgICAgICAgIGNvbnRleHQsXG4gICAgICAgICAgY3VycmVudERlcHRoLFxuICAgICAgICAgIGRlcHRoLFxuICAgICAgICAgIGZpZWxkLFxuICAgICAgICAgIGZpbmRNYW55LFxuICAgICAgICAgIGZsYXR0ZW5Mb2NhbGVzLFxuICAgICAgICAgIG92ZXJyaWRlQWNjZXNzLFxuICAgICAgICAgIHBvcHVsYXRpb25Qcm9taXNlcyxcbiAgICAgICAgICByZXEsXG4gICAgICAgICAgc2hvd0hpZGRlbkZpZWxkcyxcbiAgICAgICAgICBzaWJsaW5nRG9jLFxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9LFxuICAgIHZhbGlkYXRlOiByaWNoVGV4dFZhbGlkYXRlLFxuICB9XG59XG5cbmV4cG9ydCB7IGRlZmF1bHQgYXMgRWxlbWVudEJ1dHRvbiB9IGZyb20gJy4vZmllbGQvZWxlbWVudHMvQnV0dG9uJ1xuXG5leHBvcnQgeyBkZWZhdWx0IGFzIHRvZ2dsZUVsZW1lbnQgfSBmcm9tICcuL2ZpZWxkL2VsZW1lbnRzL3RvZ2dsZSdcbmV4cG9ydCB7IGRlZmF1bHQgYXMgTGVhZkJ1dHRvbiB9IGZyb20gJy4vZmllbGQvbGVhdmVzL0J1dHRvbidcbmV4cG9ydCB0eXBlIHtcbiAgQWRhcHRlckFyZ3VtZW50cyxcbiAgRWxlbWVudE5vZGUsXG4gIEZpZWxkUHJvcHMsXG4gIFJpY2hUZXh0Q3VzdG9tRWxlbWVudCxcbiAgUmljaFRleHRDdXN0b21MZWFmLFxuICBSaWNoVGV4dEVsZW1lbnQsXG4gIFJpY2hUZXh0TGVhZixcbiAgVGV4dE5vZGUsXG59IGZyb20gJy4vdHlwZXMnXG5cbmV4cG9ydCB7IG5vZGVJc1RleHROb2RlIH0gZnJvbSAnLi90eXBlcydcbiJdLCJuYW1lcyI6WyJzbGF0ZUVkaXRvciIsIkVsZW1lbnRCdXR0b24iLCJ0b2dnbGVFbGVtZW50IiwiTGVhZkJ1dHRvbiIsIm5vZGVJc1RleHROb2RlIiwiYXJncyIsIkNlbGxDb21wb25lbnQiLCJ3aXRoTWVyZ2VkUHJvcHMiLCJDb21wb25lbnQiLCJSaWNoVGV4dENlbGwiLCJ0b01lcmdlSW50b1Byb3BzIiwiRmllbGRDb21wb25lbnQiLCJSaWNoVGV4dEZpZWxkIiwib3V0cHV0U2NoZW1hIiwiaXNSZXF1aXJlZCIsIml0ZW1zIiwidHlwZSIsIndpdGhOdWxsYWJsZUpTT05TY2hlbWFUeXBlIiwicG9wdWxhdGlvblByb21pc2UiLCJjb250ZXh0IiwiY3VycmVudERlcHRoIiwiZGVwdGgiLCJmaWVsZCIsImZpbmRNYW55IiwiZmxhdHRlbkxvY2FsZXMiLCJvdmVycmlkZUFjY2VzcyIsInBvcHVsYXRpb25Qcm9taXNlcyIsInJlcSIsInNob3dIaWRkZW5GaWVsZHMiLCJzaWJsaW5nRG9jIiwiYWRtaW4iLCJlbGVtZW50cyIsImluY2x1ZGVzIiwicmljaFRleHRSZWxhdGlvbnNoaXBQcm9taXNlIiwidmFsaWRhdGUiLCJyaWNoVGV4dFZhbGlkYXRlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztJQVdnQkEsV0FBVztlQUFYQTs7SUEyRElDLGFBQWE7ZUFBYkEsZUFBYTs7SUFFYkMsYUFBYTtlQUFiQSxlQUFhOztJQUNiQyxVQUFVO2VBQVZBLGdCQUFVOztJQVlyQkMsY0FBYztlQUFkQSxxQkFBYzs7OzJCQW5GcUM7NkRBSW5DOzZDQUNtQjs0QkFDWDs4REFDUDsrREE2RGU7K0RBRUE7Z0VBQ0g7dUJBWVA7Ozs7OztBQTFFeEIsU0FBU0osWUFDZEssSUFBc0I7SUFFdEIsT0FBTztRQUNMQyxlQUFlQyxJQUFBQSwwQkFBZSxFQUFDO1lBQzdCQyxXQUFXQyxhQUFZO1lBQ3ZCQyxrQkFBa0JMO1FBQ3BCO1FBQ0FNLGdCQUFnQkosSUFBQUEsMEJBQWUsRUFBQztZQUM5QkMsV0FBV0ksY0FBYTtZQUN4QkYsa0JBQWtCTDtRQUNwQjtRQUNBUSxjQUFjLENBQUMsRUFBRUMsVUFBVSxFQUFFO1lBQzNCLE9BQU87Z0JBQ0xDLE9BQU87b0JBQ0xDLE1BQU07Z0JBQ1I7Z0JBQ0FBLE1BQU1DLElBQUFBLHFDQUEwQixFQUFDLFNBQVNIO1lBQzVDO1FBQ0Y7UUFDQUksbUJBQWtCLEVBQ2hCQyxPQUFPLEVBQ1BDLFlBQVksRUFDWkMsS0FBSyxFQUNMQyxLQUFLLEVBQ0xDLFFBQVEsRUFDUkMsY0FBYyxFQUNkQyxjQUFjLEVBQ2RDLGtCQUFrQixFQUNsQkMsR0FBRyxFQUNIQyxnQkFBZ0IsRUFDaEJDLFVBQVUsRUFDWDtZQUNDLElBQ0VQLE1BQU1RLEtBQUssRUFBRUMsVUFBVUMsU0FBUyxtQkFDaENWLE1BQU1RLEtBQUssRUFBRUMsVUFBVUMsU0FBUyxhQUNoQ1YsTUFBTVEsS0FBSyxFQUFFQyxVQUFVQyxTQUFTLFdBQ2hDLENBQUNWLE9BQU9RLE9BQU9DLFVBQ2Y7Z0JBQ0EsT0FBT0UsSUFBQUEsd0RBQTJCLEVBQUM7b0JBQ2pDZDtvQkFDQUM7b0JBQ0FDO29CQUNBQztvQkFDQUM7b0JBQ0FDO29CQUNBQztvQkFDQUM7b0JBQ0FDO29CQUNBQztvQkFDQUM7Z0JBQ0Y7WUFDRjtZQUNBLE9BQU87UUFDVDtRQUNBSyxVQUFVQyw0QkFBZ0I7SUFDNUI7QUFDRiJ9