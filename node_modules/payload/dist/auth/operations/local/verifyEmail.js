"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return _default;
    }
});
const _errors = require("../../../errors");
const _setRequestContext = require("../../../express/setRequestContext");
const _init = require("../../../translations/init");
const _verifyEmail = /*#__PURE__*/ _interop_require_default(require("../verifyEmail"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
async function localVerifyEmail(payload, options) {
    const { collection: collectionSlug, req = {}, token } = options;
    (0, _setRequestContext.setRequestContext)(req);
    const collection = payload.collections[collectionSlug];
    if (!collection) {
        throw new _errors.APIError(`The collection with slug ${String(collectionSlug)} can't be found. Verify Email Operation.`);
    }
    req.payload = payload;
    req.payloadAPI = req.payloadAPI || 'local';
    req.i18n = (0, _init.i18nInit)(payload.config.i18n);
    return (0, _verifyEmail.default)({
        collection,
        req,
        token
    });
}
const _default = localVerifyEmail;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9hdXRoL29wZXJhdGlvbnMvbG9jYWwvdmVyaWZ5RW1haWwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBHZW5lcmF0ZWRUeXBlcyB9IGZyb20gJy4uLy4uLy4uLydcbmltcG9ydCB0eXBlIHsgUGF5bG9hZFJlcXVlc3QgfSBmcm9tICcuLi8uLi8uLi9leHByZXNzL3R5cGVzJ1xuaW1wb3J0IHR5cGUgeyBQYXlsb2FkIH0gZnJvbSAnLi4vLi4vLi4vcGF5bG9hZCdcblxuaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tICcuLi8uLi8uLi9lcnJvcnMnXG5pbXBvcnQgeyBzZXRSZXF1ZXN0Q29udGV4dCB9IGZyb20gJy4uLy4uLy4uL2V4cHJlc3Mvc2V0UmVxdWVzdENvbnRleHQnXG5pbXBvcnQgeyBpMThuSW5pdCB9IGZyb20gJy4uLy4uLy4uL3RyYW5zbGF0aW9ucy9pbml0J1xuaW1wb3J0IHZlcmlmeUVtYWlsIGZyb20gJy4uL3ZlcmlmeUVtYWlsJ1xuXG5leHBvcnQgdHlwZSBPcHRpb25zPFQgZXh0ZW5kcyBrZXlvZiBHZW5lcmF0ZWRUeXBlc1snY29sbGVjdGlvbnMnXT4gPSB7XG4gIGNvbGxlY3Rpb246IFRcbiAgcmVxPzogUGF5bG9hZFJlcXVlc3RcbiAgdG9rZW46IHN0cmluZ1xufVxuXG5hc3luYyBmdW5jdGlvbiBsb2NhbFZlcmlmeUVtYWlsPFQgZXh0ZW5kcyBrZXlvZiBHZW5lcmF0ZWRUeXBlc1snY29sbGVjdGlvbnMnXT4oXG4gIHBheWxvYWQ6IFBheWxvYWQsXG4gIG9wdGlvbnM6IE9wdGlvbnM8VD4sXG4pOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgY29uc3QgeyBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uU2x1ZywgcmVxID0ge30gYXMgUGF5bG9hZFJlcXVlc3QsIHRva2VuIH0gPSBvcHRpb25zXG4gIHNldFJlcXVlc3RDb250ZXh0KHJlcSlcblxuICBjb25zdCBjb2xsZWN0aW9uID0gcGF5bG9hZC5jb2xsZWN0aW9uc1tjb2xsZWN0aW9uU2x1Z11cblxuICBpZiAoIWNvbGxlY3Rpb24pIHtcbiAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXG4gICAgICBgVGhlIGNvbGxlY3Rpb24gd2l0aCBzbHVnICR7U3RyaW5nKGNvbGxlY3Rpb25TbHVnKX0gY2FuJ3QgYmUgZm91bmQuIFZlcmlmeSBFbWFpbCBPcGVyYXRpb24uYCxcbiAgICApXG4gIH1cblxuICByZXEucGF5bG9hZCA9IHBheWxvYWRcbiAgcmVxLnBheWxvYWRBUEkgPSByZXEucGF5bG9hZEFQSSB8fCAnbG9jYWwnXG4gIHJlcS5pMThuID0gaTE4bkluaXQocGF5bG9hZC5jb25maWcuaTE4bilcblxuICByZXR1cm4gdmVyaWZ5RW1haWwoe1xuICAgIGNvbGxlY3Rpb24sXG4gICAgcmVxLFxuICAgIHRva2VuLFxuICB9KVxufVxuXG5leHBvcnQgZGVmYXVsdCBsb2NhbFZlcmlmeUVtYWlsXG4iXSwibmFtZXMiOlsibG9jYWxWZXJpZnlFbWFpbCIsInBheWxvYWQiLCJvcHRpb25zIiwiY29sbGVjdGlvbiIsImNvbGxlY3Rpb25TbHVnIiwicmVxIiwidG9rZW4iLCJzZXRSZXF1ZXN0Q29udGV4dCIsImNvbGxlY3Rpb25zIiwiQVBJRXJyb3IiLCJTdHJpbmciLCJwYXlsb2FkQVBJIiwiaTE4biIsImkxOG5Jbml0IiwiY29uZmlnIiwidmVyaWZ5RW1haWwiXSwibWFwcGluZ3MiOiI7Ozs7K0JBeUNBOzs7ZUFBQTs7O3dCQXJDeUI7bUNBQ1M7c0JBQ1Q7b0VBQ0Q7Ozs7OztBQVF4QixlQUFlQSxpQkFDYkMsT0FBZ0IsRUFDaEJDLE9BQW1CO0lBRW5CLE1BQU0sRUFBRUMsWUFBWUMsY0FBYyxFQUFFQyxNQUFNLENBQUMsQ0FBbUIsRUFBRUMsS0FBSyxFQUFFLEdBQUdKO0lBQzFFSyxJQUFBQSxvQ0FBaUIsRUFBQ0Y7SUFFbEIsTUFBTUYsYUFBYUYsUUFBUU8sV0FBVyxDQUFDSixlQUFlO0lBRXRELElBQUksQ0FBQ0QsWUFBWTtRQUNmLE1BQU0sSUFBSU0sZ0JBQVEsQ0FDaEIsQ0FBQyx5QkFBeUIsRUFBRUMsT0FBT04sZ0JBQWdCLHdDQUF3QyxDQUFDO0lBRWhHO0lBRUFDLElBQUlKLE9BQU8sR0FBR0E7SUFDZEksSUFBSU0sVUFBVSxHQUFHTixJQUFJTSxVQUFVLElBQUk7SUFDbkNOLElBQUlPLElBQUksR0FBR0MsSUFBQUEsY0FBUSxFQUFDWixRQUFRYSxNQUFNLENBQUNGLElBQUk7SUFFdkMsT0FBT0csSUFBQUEsb0JBQVcsRUFBQztRQUNqQlo7UUFDQUU7UUFDQUM7SUFDRjtBQUNGO01BRUEsV0FBZU4ifQ==