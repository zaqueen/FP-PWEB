"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return _default;
    }
});
const autoRemoveVerificationToken = ({ data, operation, originalDoc, value })=>{
    // If a user manually sets `_verified` to true,
    // and it was `false`, set _verificationToken to `null`.
    // This is useful because the admin panel
    // allows users to set `_verified` to true manually
    if (operation === 'update') {
        if (data?._verified === true && originalDoc?._verified === false) {
            return null;
        }
    }
    return value;
};
const _default = [
    {
        name: '_verified',
        access: {
            create: ({ req: { user } })=>Boolean(user),
            read: ({ req: { user } })=>Boolean(user),
            update: ({ req: { user } })=>Boolean(user)
        },
        admin: {
            components: {
                Field: ()=>null
            }
        },
        type: 'checkbox'
    },
    {
        name: '_verificationToken',
        hidden: true,
        hooks: {
            beforeChange: [
                autoRemoveVerificationToken
            ]
        },
        type: 'text'
    }
];

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9hdXRoL2Jhc2VGaWVsZHMvdmVyaWZpY2F0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgRmllbGQsIEZpZWxkSG9vayB9IGZyb20gJy4uLy4uL2ZpZWxkcy9jb25maWcvdHlwZXMnXG5cbmNvbnN0IGF1dG9SZW1vdmVWZXJpZmljYXRpb25Ub2tlbjogRmllbGRIb29rID0gKHsgZGF0YSwgb3BlcmF0aW9uLCBvcmlnaW5hbERvYywgdmFsdWUgfSkgPT4ge1xuICAvLyBJZiBhIHVzZXIgbWFudWFsbHkgc2V0cyBgX3ZlcmlmaWVkYCB0byB0cnVlLFxuICAvLyBhbmQgaXQgd2FzIGBmYWxzZWAsIHNldCBfdmVyaWZpY2F0aW9uVG9rZW4gdG8gYG51bGxgLlxuICAvLyBUaGlzIGlzIHVzZWZ1bCBiZWNhdXNlIHRoZSBhZG1pbiBwYW5lbFxuICAvLyBhbGxvd3MgdXNlcnMgdG8gc2V0IGBfdmVyaWZpZWRgIHRvIHRydWUgbWFudWFsbHlcblxuICBpZiAob3BlcmF0aW9uID09PSAndXBkYXRlJykge1xuICAgIGlmIChkYXRhPy5fdmVyaWZpZWQgPT09IHRydWUgJiYgb3JpZ2luYWxEb2M/Ll92ZXJpZmllZCA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHZhbHVlXG59XG5cbmV4cG9ydCBkZWZhdWx0IFtcbiAge1xuICAgIG5hbWU6ICdfdmVyaWZpZWQnLFxuICAgIGFjY2Vzczoge1xuICAgICAgY3JlYXRlOiAoeyByZXE6IHsgdXNlciB9IH0pID0+IEJvb2xlYW4odXNlciksXG4gICAgICByZWFkOiAoeyByZXE6IHsgdXNlciB9IH0pID0+IEJvb2xlYW4odXNlciksXG4gICAgICB1cGRhdGU6ICh7IHJlcTogeyB1c2VyIH0gfSkgPT4gQm9vbGVhbih1c2VyKSxcbiAgICB9LFxuICAgIGFkbWluOiB7XG4gICAgICBjb21wb25lbnRzOiB7XG4gICAgICAgIEZpZWxkOiAoKSA9PiBudWxsLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHR5cGU6ICdjaGVja2JveCcsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnX3ZlcmlmaWNhdGlvblRva2VuJyxcbiAgICBoaWRkZW46IHRydWUsXG4gICAgaG9va3M6IHtcbiAgICAgIGJlZm9yZUNoYW5nZTogW2F1dG9SZW1vdmVWZXJpZmljYXRpb25Ub2tlbl0sXG4gICAgfSxcbiAgICB0eXBlOiAndGV4dCcsXG4gIH0sXG5dIGFzIEZpZWxkW11cbiJdLCJuYW1lcyI6WyJhdXRvUmVtb3ZlVmVyaWZpY2F0aW9uVG9rZW4iLCJkYXRhIiwib3BlcmF0aW9uIiwib3JpZ2luYWxEb2MiLCJ2YWx1ZSIsIl92ZXJpZmllZCIsIm5hbWUiLCJhY2Nlc3MiLCJjcmVhdGUiLCJyZXEiLCJ1c2VyIiwiQm9vbGVhbiIsInJlYWQiLCJ1cGRhdGUiLCJhZG1pbiIsImNvbXBvbmVudHMiLCJGaWVsZCIsInR5cGUiLCJoaWRkZW4iLCJob29rcyIsImJlZm9yZUNoYW5nZSJdLCJtYXBwaW5ncyI6Ijs7OzsrQkFpQkE7OztlQUFBOzs7QUFmQSxNQUFNQSw4QkFBeUMsQ0FBQyxFQUFFQyxJQUFJLEVBQUVDLFNBQVMsRUFBRUMsV0FBVyxFQUFFQyxLQUFLLEVBQUU7SUFDckYsK0NBQStDO0lBQy9DLHdEQUF3RDtJQUN4RCx5Q0FBeUM7SUFDekMsbURBQW1EO0lBRW5ELElBQUlGLGNBQWMsVUFBVTtRQUMxQixJQUFJRCxNQUFNSSxjQUFjLFFBQVFGLGFBQWFFLGNBQWMsT0FBTztZQUNoRSxPQUFPO1FBQ1Q7SUFDRjtJQUVBLE9BQU9EO0FBQ1Q7TUFFQSxXQUFlO0lBQ2I7UUFDRUUsTUFBTTtRQUNOQyxRQUFRO1lBQ05DLFFBQVEsQ0FBQyxFQUFFQyxLQUFLLEVBQUVDLElBQUksRUFBRSxFQUFFLEdBQUtDLFFBQVFEO1lBQ3ZDRSxNQUFNLENBQUMsRUFBRUgsS0FBSyxFQUFFQyxJQUFJLEVBQUUsRUFBRSxHQUFLQyxRQUFRRDtZQUNyQ0csUUFBUSxDQUFDLEVBQUVKLEtBQUssRUFBRUMsSUFBSSxFQUFFLEVBQUUsR0FBS0MsUUFBUUQ7UUFDekM7UUFDQUksT0FBTztZQUNMQyxZQUFZO2dCQUNWQyxPQUFPLElBQU07WUFDZjtRQUNGO1FBQ0FDLE1BQU07SUFDUjtJQUNBO1FBQ0VYLE1BQU07UUFDTlksUUFBUTtRQUNSQyxPQUFPO1lBQ0xDLGNBQWM7Z0JBQUNwQjthQUE0QjtRQUM3QztRQUNBaUIsTUFBTTtJQUNSO0NBQ0QifQ==