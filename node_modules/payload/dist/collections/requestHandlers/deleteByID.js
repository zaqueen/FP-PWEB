"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return deleteByIDHandler;
    }
});
const _httpstatus = /*#__PURE__*/ _interop_require_default(require("http-status"));
const _errors = require("../../errors");
const _deleteByID = /*#__PURE__*/ _interop_require_default(require("../operations/deleteByID"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
async function deleteByIDHandler(req, res, next) {
    try {
        const doc = await (0, _deleteByID.default)({
            id: req.params.id,
            collection: req.collection,
            depth: parseInt(String(req.query.depth), 10),
            req
        });
        if (!doc) {
            res.status(_httpstatus.default.NOT_FOUND).json(new _errors.NotFound(req.t));
        }
        res.status(_httpstatus.default.OK).send(doc);
    } catch (error) {
        next(error);
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb2xsZWN0aW9ucy9yZXF1ZXN0SGFuZGxlcnMvZGVsZXRlQnlJRC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IE5leHRGdW5jdGlvbiwgUmVzcG9uc2UgfSBmcm9tICdleHByZXNzJ1xuXG5pbXBvcnQgaHR0cFN0YXR1cyBmcm9tICdodHRwLXN0YXR1cydcblxuaW1wb3J0IHR5cGUgeyBQYXlsb2FkUmVxdWVzdCB9IGZyb20gJy4uLy4uL2V4cHJlc3MvdHlwZXMnXG5pbXBvcnQgdHlwZSB7IERvY3VtZW50IH0gZnJvbSAnLi4vLi4vdHlwZXMnXG5cbmltcG9ydCB7IE5vdEZvdW5kIH0gZnJvbSAnLi4vLi4vZXJyb3JzJ1xuaW1wb3J0IGRlbGV0ZUJ5SUQgZnJvbSAnLi4vb3BlcmF0aW9ucy9kZWxldGVCeUlEJ1xuXG5leHBvcnQgdHlwZSBEZWxldGVSZXN1bHQgPSB7XG4gIGRvYzogRG9jdW1lbnRcbiAgbWVzc2FnZTogc3RyaW5nXG59XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUJ5SURIYW5kbGVyKFxuICByZXE6IFBheWxvYWRSZXF1ZXN0LFxuICByZXM6IFJlc3BvbnNlLFxuICBuZXh0OiBOZXh0RnVuY3Rpb24sXG4pOiBQcm9taXNlPFJlc3BvbnNlPERlbGV0ZVJlc3VsdD4gfCB2b2lkPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgZG9jID0gYXdhaXQgZGVsZXRlQnlJRCh7XG4gICAgICBpZDogcmVxLnBhcmFtcy5pZCxcbiAgICAgIGNvbGxlY3Rpb246IHJlcS5jb2xsZWN0aW9uLFxuICAgICAgZGVwdGg6IHBhcnNlSW50KFN0cmluZyhyZXEucXVlcnkuZGVwdGgpLCAxMCksXG4gICAgICByZXEsXG4gICAgfSlcblxuICAgIGlmICghZG9jKSB7XG4gICAgICByZXMuc3RhdHVzKGh0dHBTdGF0dXMuTk9UX0ZPVU5EKS5qc29uKG5ldyBOb3RGb3VuZChyZXEudCkpXG4gICAgfVxuXG4gICAgcmVzLnN0YXR1cyhodHRwU3RhdHVzLk9LKS5zZW5kKGRvYylcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBuZXh0KGVycm9yKVxuICB9XG59XG4iXSwibmFtZXMiOlsiZGVsZXRlQnlJREhhbmRsZXIiLCJyZXEiLCJyZXMiLCJuZXh0IiwiZG9jIiwiZGVsZXRlQnlJRCIsImlkIiwicGFyYW1zIiwiY29sbGVjdGlvbiIsImRlcHRoIiwicGFyc2VJbnQiLCJTdHJpbmciLCJxdWVyeSIsInN0YXR1cyIsImh0dHBTdGF0dXMiLCJOT1RfRk9VTkQiLCJqc29uIiwiTm90Rm91bmQiLCJ0IiwiT0siLCJzZW5kIiwiZXJyb3IiXSwibWFwcGluZ3MiOiI7Ozs7K0JBZUE7OztlQUE4QkE7OzttRUFiUDt3QkFLRTttRUFDRjs7Ozs7O0FBT1IsZUFBZUEsa0JBQzVCQyxHQUFtQixFQUNuQkMsR0FBYSxFQUNiQyxJQUFrQjtJQUVsQixJQUFJO1FBQ0YsTUFBTUMsTUFBTSxNQUFNQyxJQUFBQSxtQkFBVSxFQUFDO1lBQzNCQyxJQUFJTCxJQUFJTSxNQUFNLENBQUNELEVBQUU7WUFDakJFLFlBQVlQLElBQUlPLFVBQVU7WUFDMUJDLE9BQU9DLFNBQVNDLE9BQU9WLElBQUlXLEtBQUssQ0FBQ0gsS0FBSyxHQUFHO1lBQ3pDUjtRQUNGO1FBRUEsSUFBSSxDQUFDRyxLQUFLO1lBQ1JGLElBQUlXLE1BQU0sQ0FBQ0MsbUJBQVUsQ0FBQ0MsU0FBUyxFQUFFQyxJQUFJLENBQUMsSUFBSUMsZ0JBQVEsQ0FBQ2hCLElBQUlpQixDQUFDO1FBQzFEO1FBRUFoQixJQUFJVyxNQUFNLENBQUNDLG1CQUFVLENBQUNLLEVBQUUsRUFBRUMsSUFBSSxDQUFDaEI7SUFDakMsRUFBRSxPQUFPaUIsT0FBTztRQUNkbEIsS0FBS2tCO0lBQ1A7QUFDRiJ9