"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return restoreVersionHandler;
    }
});
const _httpstatus = /*#__PURE__*/ _interop_require_default(require("http-status"));
const _formatSuccess = /*#__PURE__*/ _interop_require_default(require("../../express/responses/formatSuccess"));
const _restoreVersion = /*#__PURE__*/ _interop_require_default(require("../operations/restoreVersion"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
async function restoreVersionHandler(req, res, next) {
    const options = {
        id: req.params.id,
        collection: req.collection,
        depth: Number(req.query.depth),
        payload: req.payload,
        req
    };
    try {
        const doc = await (0, _restoreVersion.default)(options);
        res.status(_httpstatus.default.OK).json({
            ...(0, _formatSuccess.default)(req.t('version:restoredSuccessfully'), 'message'),
            doc
        });
    } catch (error) {
        next(error);
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb2xsZWN0aW9ucy9yZXF1ZXN0SGFuZGxlcnMvcmVzdG9yZVZlcnNpb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBOZXh0RnVuY3Rpb24sIFJlc3BvbnNlIH0gZnJvbSAnZXhwcmVzcydcblxuaW1wb3J0IGh0dHBTdGF0dXMgZnJvbSAnaHR0cC1zdGF0dXMnXG5cbmltcG9ydCB0eXBlIHsgUGF5bG9hZFJlcXVlc3QgfSBmcm9tICcuLi8uLi9leHByZXNzL3R5cGVzJ1xuaW1wb3J0IHR5cGUgeyBEb2N1bWVudCB9IGZyb20gJy4uLy4uL3R5cGVzJ1xuXG5pbXBvcnQgZm9ybWF0U3VjY2Vzc1Jlc3BvbnNlIGZyb20gJy4uLy4uL2V4cHJlc3MvcmVzcG9uc2VzL2Zvcm1hdFN1Y2Nlc3MnXG5pbXBvcnQgcmVzdG9yZVZlcnNpb24gZnJvbSAnLi4vb3BlcmF0aW9ucy9yZXN0b3JlVmVyc2lvbidcblxuZXhwb3J0IHR5cGUgUmVzdG9yZVJlc3VsdCA9IHtcbiAgZG9jOiBEb2N1bWVudFxuICBtZXNzYWdlOiBzdHJpbmdcbn1cblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gcmVzdG9yZVZlcnNpb25IYW5kbGVyKFxuICByZXE6IFBheWxvYWRSZXF1ZXN0LFxuICByZXM6IFJlc3BvbnNlLFxuICBuZXh0OiBOZXh0RnVuY3Rpb24sXG4pOiBQcm9taXNlPFJlc3BvbnNlPFJlc3RvcmVSZXN1bHQ+IHwgdm9pZD4ge1xuICBjb25zdCBvcHRpb25zID0ge1xuICAgIGlkOiByZXEucGFyYW1zLmlkLFxuICAgIGNvbGxlY3Rpb246IHJlcS5jb2xsZWN0aW9uLFxuICAgIGRlcHRoOiBOdW1iZXIocmVxLnF1ZXJ5LmRlcHRoKSxcbiAgICBwYXlsb2FkOiByZXEucGF5bG9hZCxcbiAgICByZXEsXG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IGRvYyA9IGF3YWl0IHJlc3RvcmVWZXJzaW9uKG9wdGlvbnMpXG4gICAgcmVzLnN0YXR1cyhodHRwU3RhdHVzLk9LKS5qc29uKHtcbiAgICAgIC4uLmZvcm1hdFN1Y2Nlc3NSZXNwb25zZShyZXEudCgndmVyc2lvbjpyZXN0b3JlZFN1Y2Nlc3NmdWxseScpLCAnbWVzc2FnZScpLFxuICAgICAgZG9jLFxuICAgIH0pXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbmV4dChlcnJvcilcbiAgfVxufVxuIl0sIm5hbWVzIjpbInJlc3RvcmVWZXJzaW9uSGFuZGxlciIsInJlcSIsInJlcyIsIm5leHQiLCJvcHRpb25zIiwiaWQiLCJwYXJhbXMiLCJjb2xsZWN0aW9uIiwiZGVwdGgiLCJOdW1iZXIiLCJxdWVyeSIsInBheWxvYWQiLCJkb2MiLCJyZXN0b3JlVmVyc2lvbiIsInN0YXR1cyIsImh0dHBTdGF0dXMiLCJPSyIsImpzb24iLCJmb3JtYXRTdWNjZXNzUmVzcG9uc2UiLCJ0IiwiZXJyb3IiXSwibWFwcGluZ3MiOiI7Ozs7K0JBZUE7OztlQUE4QkE7OzttRUFiUDtzRUFLVzt1RUFDUDs7Ozs7O0FBT1osZUFBZUEsc0JBQzVCQyxHQUFtQixFQUNuQkMsR0FBYSxFQUNiQyxJQUFrQjtJQUVsQixNQUFNQyxVQUFVO1FBQ2RDLElBQUlKLElBQUlLLE1BQU0sQ0FBQ0QsRUFBRTtRQUNqQkUsWUFBWU4sSUFBSU0sVUFBVTtRQUMxQkMsT0FBT0MsT0FBT1IsSUFBSVMsS0FBSyxDQUFDRixLQUFLO1FBQzdCRyxTQUFTVixJQUFJVSxPQUFPO1FBQ3BCVjtJQUNGO0lBRUEsSUFBSTtRQUNGLE1BQU1XLE1BQU0sTUFBTUMsSUFBQUEsdUJBQWMsRUFBQ1Q7UUFDakNGLElBQUlZLE1BQU0sQ0FBQ0MsbUJBQVUsQ0FBQ0MsRUFBRSxFQUFFQyxJQUFJLENBQUM7WUFDN0IsR0FBR0MsSUFBQUEsc0JBQXFCLEVBQUNqQixJQUFJa0IsQ0FBQyxDQUFDLGlDQUFpQyxVQUFVO1lBQzFFUDtRQUNGO0lBQ0YsRUFBRSxPQUFPUSxPQUFPO1FBQ2RqQixLQUFLaUI7SUFDUDtBQUNGIn0=