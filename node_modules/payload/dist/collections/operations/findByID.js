/* eslint-disable no-underscore-dangle */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return _default;
    }
});
const _micromemoize = /*#__PURE__*/ _interop_require_default(require("micro-memoize"));
const _executeAccess = /*#__PURE__*/ _interop_require_default(require("../../auth/executeAccess"));
const _combineQueries = require("../../database/combineQueries");
const _errors = require("../../errors");
const _afterRead = require("../../fields/hooks/afterRead");
const _commitTransaction = require("../../utilities/commitTransaction");
const _initTransaction = require("../../utilities/initTransaction");
const _killTransaction = require("../../utilities/killTransaction");
const _replaceWithDraftIfAvailable = /*#__PURE__*/ _interop_require_default(require("../../versions/drafts/replaceWithDraftIfAvailable"));
const _utils = require("./utils");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
async function findByID(incomingArgs) {
    let args = incomingArgs;
    // /////////////////////////////////////
    // beforeOperation - Collection
    // /////////////////////////////////////
    await args.collection.config.hooks.beforeOperation.reduce(async (priorHook, hook)=>{
        await priorHook;
        args = await hook({
            args,
            collection: args.collection.config,
            context: args.req.context,
            operation: 'read'
        }) || args;
    }, Promise.resolve());
    const { id, collection: { config: collectionConfig }, currentDepth, depth, disableErrors, draft: draftEnabled = false, overrideAccess = false, req: { locale, t }, req, showHiddenFields } = args;
    try {
        const shouldCommit = await (0, _initTransaction.initTransaction)(req);
        const { transactionID } = req;
        // /////////////////////////////////////
        // Access
        // /////////////////////////////////////
        const accessResult = !overrideAccess ? await (0, _executeAccess.default)({
            id,
            disableErrors,
            req
        }, collectionConfig.access.read) : true;
        // If errors are disabled, and access returns false, return null
        if (accessResult === false) return null;
        const findOneArgs = {
            collection: collectionConfig.slug,
            locale,
            req: {
                transactionID: req.transactionID
            },
            where: (0, _combineQueries.combineQueries)({
                id: {
                    equals: id
                }
            }, accessResult)
        };
        // /////////////////////////////////////
        // Find by ID
        // /////////////////////////////////////
        if (!findOneArgs.where.and[0].id) throw new _errors.NotFound(t);
        if (!req.findByID) {
            req.findByID = {
                [transactionID]: {}
            };
        } else if (!req.findByID[transactionID]) {
            req.findByID[transactionID] = {};
        }
        if (!req.findByID[transactionID][collectionConfig.slug]) {
            const nonMemoizedFindByID = async (query)=>req.payload.db.findOne(query);
            req.findByID[transactionID][collectionConfig.slug] = (0, _micromemoize.default)(nonMemoizedFindByID, {
                isPromise: true,
                maxSize: 100,
                // eslint-disable-next-line @typescript-eslint/ban-ts-comment
                // @ts-ignore This is straight from their docs, bad typings
                transformKey: JSON.stringify
            });
        }
        let result = await req.findByID[transactionID][collectionConfig.slug](findOneArgs);
        if (!result) {
            if (!disableErrors) {
                throw new _errors.NotFound(t);
            }
            return null;
        }
        // Clone the result - it may have come back memoized
        result = JSON.parse(JSON.stringify(result));
        // /////////////////////////////////////
        // Replace document with draft if available
        // /////////////////////////////////////
        if (collectionConfig.versions?.drafts && draftEnabled) {
            result = await (0, _replaceWithDraftIfAvailable.default)({
                accessResult,
                doc: result,
                entity: collectionConfig,
                entityType: 'collection',
                overrideAccess,
                req
            });
        }
        // /////////////////////////////////////
        // beforeRead - Collection
        // /////////////////////////////////////
        await collectionConfig.hooks.beforeRead.reduce(async (priorHook, hook)=>{
            await priorHook;
            result = await hook({
                collection: collectionConfig,
                context: req.context,
                doc: result,
                query: findOneArgs.where,
                req
            }) || result;
        }, Promise.resolve());
        // /////////////////////////////////////
        // afterRead - Fields
        // /////////////////////////////////////
        result = await (0, _afterRead.afterRead)({
            collection: collectionConfig,
            context: req.context,
            currentDepth,
            depth,
            doc: result,
            global: null,
            overrideAccess,
            req,
            showHiddenFields
        });
        // /////////////////////////////////////
        // afterRead - Collection
        // /////////////////////////////////////
        await collectionConfig.hooks.afterRead.reduce(async (priorHook, hook)=>{
            await priorHook;
            result = await hook({
                collection: collectionConfig,
                context: req.context,
                doc: result,
                query: findOneArgs.where,
                req
            }) || result;
        }, Promise.resolve());
        // /////////////////////////////////////
        // afterOperation - Collection
        // /////////////////////////////////////
        result = await (0, _utils.buildAfterOperation)({
            args,
            collection: collectionConfig,
            operation: 'findByID',
            result: result
        }) // TODO: fix this typing
        ;
        // /////////////////////////////////////
        // Return results
        // /////////////////////////////////////
        if (shouldCommit) await (0, _commitTransaction.commitTransaction)(req);
        return result;
    } catch (error) {
        await (0, _killTransaction.killTransaction)(req);
        throw error;
    }
}
const _default = findByID;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb2xsZWN0aW9ucy9vcGVyYXRpb25zL2ZpbmRCeUlELnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVyc2NvcmUtZGFuZ2xlICovXG5pbXBvcnQgbWVtb2l6ZSBmcm9tICdtaWNyby1tZW1vaXplJ1xuXG5pbXBvcnQgdHlwZSB7IEZpbmRPbmVBcmdzIH0gZnJvbSAnLi4vLi4vZGF0YWJhc2UvdHlwZXMnXG5pbXBvcnQgdHlwZSB7IFBheWxvYWRSZXF1ZXN0IH0gZnJvbSAnLi4vLi4vZXhwcmVzcy90eXBlcydcbmltcG9ydCB0eXBlIHsgQ29sbGVjdGlvbiwgVHlwZVdpdGhJRCB9IGZyb20gJy4uL2NvbmZpZy90eXBlcydcblxuaW1wb3J0IGV4ZWN1dGVBY2Nlc3MgZnJvbSAnLi4vLi4vYXV0aC9leGVjdXRlQWNjZXNzJ1xuaW1wb3J0IHsgY29tYmluZVF1ZXJpZXMgfSBmcm9tICcuLi8uLi9kYXRhYmFzZS9jb21iaW5lUXVlcmllcydcbmltcG9ydCB7IE5vdEZvdW5kIH0gZnJvbSAnLi4vLi4vZXJyb3JzJ1xuaW1wb3J0IHsgYWZ0ZXJSZWFkIH0gZnJvbSAnLi4vLi4vZmllbGRzL2hvb2tzL2FmdGVyUmVhZCdcbmltcG9ydCB7IGNvbW1pdFRyYW5zYWN0aW9uIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzL2NvbW1pdFRyYW5zYWN0aW9uJ1xuaW1wb3J0IHsgaW5pdFRyYW5zYWN0aW9uIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzL2luaXRUcmFuc2FjdGlvbidcbmltcG9ydCB7IGtpbGxUcmFuc2FjdGlvbiB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy9raWxsVHJhbnNhY3Rpb24nXG5pbXBvcnQgcmVwbGFjZVdpdGhEcmFmdElmQXZhaWxhYmxlIGZyb20gJy4uLy4uL3ZlcnNpb25zL2RyYWZ0cy9yZXBsYWNlV2l0aERyYWZ0SWZBdmFpbGFibGUnXG5pbXBvcnQgeyBidWlsZEFmdGVyT3BlcmF0aW9uIH0gZnJvbSAnLi91dGlscydcblxuZXhwb3J0IHR5cGUgQXJndW1lbnRzID0ge1xuICBjb2xsZWN0aW9uOiBDb2xsZWN0aW9uXG4gIGN1cnJlbnREZXB0aD86IG51bWJlclxuICBkZXB0aD86IG51bWJlclxuICBkaXNhYmxlRXJyb3JzPzogYm9vbGVhblxuICBkcmFmdD86IGJvb2xlYW5cbiAgaWQ6IG51bWJlciB8IHN0cmluZ1xuICBvdmVycmlkZUFjY2Vzcz86IGJvb2xlYW5cbiAgcmVxOiBQYXlsb2FkUmVxdWVzdFxuICBzaG93SGlkZGVuRmllbGRzPzogYm9vbGVhblxufVxuXG5hc3luYyBmdW5jdGlvbiBmaW5kQnlJRDxUIGV4dGVuZHMgVHlwZVdpdGhJRD4oaW5jb21pbmdBcmdzOiBBcmd1bWVudHMpOiBQcm9taXNlPFQ+IHtcbiAgbGV0IGFyZ3MgPSBpbmNvbWluZ0FyZ3NcblxuICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIC8vIGJlZm9yZU9wZXJhdGlvbiAtIENvbGxlY3Rpb25cbiAgLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gIGF3YWl0IGFyZ3MuY29sbGVjdGlvbi5jb25maWcuaG9va3MuYmVmb3JlT3BlcmF0aW9uLnJlZHVjZShhc3luYyAocHJpb3JIb29rLCBob29rKSA9PiB7XG4gICAgYXdhaXQgcHJpb3JIb29rXG5cbiAgICBhcmdzID1cbiAgICAgIChhd2FpdCBob29rKHtcbiAgICAgICAgYXJncyxcbiAgICAgICAgY29sbGVjdGlvbjogYXJncy5jb2xsZWN0aW9uLmNvbmZpZyxcbiAgICAgICAgY29udGV4dDogYXJncy5yZXEuY29udGV4dCxcbiAgICAgICAgb3BlcmF0aW9uOiAncmVhZCcsXG4gICAgICB9KSkgfHwgYXJnc1xuICB9LCBQcm9taXNlLnJlc29sdmUoKSlcblxuICBjb25zdCB7XG4gICAgaWQsXG4gICAgY29sbGVjdGlvbjogeyBjb25maWc6IGNvbGxlY3Rpb25Db25maWcgfSxcbiAgICBjdXJyZW50RGVwdGgsXG4gICAgZGVwdGgsXG4gICAgZGlzYWJsZUVycm9ycyxcbiAgICBkcmFmdDogZHJhZnRFbmFibGVkID0gZmFsc2UsXG4gICAgb3ZlcnJpZGVBY2Nlc3MgPSBmYWxzZSxcbiAgICByZXE6IHsgbG9jYWxlLCB0IH0sXG4gICAgcmVxLFxuICAgIHNob3dIaWRkZW5GaWVsZHMsXG4gIH0gPSBhcmdzXG5cbiAgdHJ5IHtcbiAgICBjb25zdCBzaG91bGRDb21taXQgPSBhd2FpdCBpbml0VHJhbnNhY3Rpb24ocmVxKVxuICAgIGNvbnN0IHsgdHJhbnNhY3Rpb25JRCB9ID0gcmVxXG5cbiAgICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8gQWNjZXNzXG4gICAgLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgY29uc3QgYWNjZXNzUmVzdWx0ID0gIW92ZXJyaWRlQWNjZXNzXG4gICAgICA/IGF3YWl0IGV4ZWN1dGVBY2Nlc3MoeyBpZCwgZGlzYWJsZUVycm9ycywgcmVxIH0sIGNvbGxlY3Rpb25Db25maWcuYWNjZXNzLnJlYWQpXG4gICAgICA6IHRydWVcblxuICAgIC8vIElmIGVycm9ycyBhcmUgZGlzYWJsZWQsIGFuZCBhY2Nlc3MgcmV0dXJucyBmYWxzZSwgcmV0dXJuIG51bGxcbiAgICBpZiAoYWNjZXNzUmVzdWx0ID09PSBmYWxzZSkgcmV0dXJuIG51bGxcblxuICAgIGNvbnN0IGZpbmRPbmVBcmdzOiBGaW5kT25lQXJncyA9IHtcbiAgICAgIGNvbGxlY3Rpb246IGNvbGxlY3Rpb25Db25maWcuc2x1ZyxcbiAgICAgIGxvY2FsZSxcbiAgICAgIHJlcToge1xuICAgICAgICB0cmFuc2FjdGlvbklEOiByZXEudHJhbnNhY3Rpb25JRCxcbiAgICAgIH0gYXMgUGF5bG9hZFJlcXVlc3QsXG4gICAgICB3aGVyZTogY29tYmluZVF1ZXJpZXMoeyBpZDogeyBlcXVhbHM6IGlkIH0gfSwgYWNjZXNzUmVzdWx0KSxcbiAgICB9XG5cbiAgICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8gRmluZCBieSBJRFxuICAgIC8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgIGlmICghZmluZE9uZUFyZ3Mud2hlcmUuYW5kWzBdLmlkKSB0aHJvdyBuZXcgTm90Rm91bmQodClcblxuICAgIGlmICghcmVxLmZpbmRCeUlEKSB7XG4gICAgICByZXEuZmluZEJ5SUQgPSB7IFt0cmFuc2FjdGlvbklEXToge30gfVxuICAgIH0gZWxzZSBpZiAoIXJlcS5maW5kQnlJRFt0cmFuc2FjdGlvbklEXSkge1xuICAgICAgcmVxLmZpbmRCeUlEW3RyYW5zYWN0aW9uSURdID0ge31cbiAgICB9XG5cbiAgICBpZiAoIXJlcS5maW5kQnlJRFt0cmFuc2FjdGlvbklEXVtjb2xsZWN0aW9uQ29uZmlnLnNsdWddKSB7XG4gICAgICBjb25zdCBub25NZW1vaXplZEZpbmRCeUlEID0gYXN5bmMgKHF1ZXJ5OiBGaW5kT25lQXJncykgPT4gcmVxLnBheWxvYWQuZGIuZmluZE9uZShxdWVyeSlcblxuICAgICAgcmVxLmZpbmRCeUlEW3RyYW5zYWN0aW9uSURdW2NvbGxlY3Rpb25Db25maWcuc2x1Z10gPSBtZW1vaXplKG5vbk1lbW9pemVkRmluZEJ5SUQsIHtcbiAgICAgICAgaXNQcm9taXNlOiB0cnVlLFxuICAgICAgICBtYXhTaXplOiAxMDAsXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnRcbiAgICAgICAgLy8gQHRzLWlnbm9yZSBUaGlzIGlzIHN0cmFpZ2h0IGZyb20gdGhlaXIgZG9jcywgYmFkIHR5cGluZ3NcbiAgICAgICAgdHJhbnNmb3JtS2V5OiBKU09OLnN0cmluZ2lmeSxcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgbGV0IHJlc3VsdCA9IChhd2FpdCByZXEuZmluZEJ5SURbdHJhbnNhY3Rpb25JRF1bY29sbGVjdGlvbkNvbmZpZy5zbHVnXShmaW5kT25lQXJncykpIGFzIFRcblxuICAgIGlmICghcmVzdWx0KSB7XG4gICAgICBpZiAoIWRpc2FibGVFcnJvcnMpIHtcbiAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kKHQpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgLy8gQ2xvbmUgdGhlIHJlc3VsdCAtIGl0IG1heSBoYXZlIGNvbWUgYmFjayBtZW1vaXplZFxuICAgIHJlc3VsdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzdWx0KSlcblxuICAgIC8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLyBSZXBsYWNlIGRvY3VtZW50IHdpdGggZHJhZnQgaWYgYXZhaWxhYmxlXG4gICAgLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgaWYgKGNvbGxlY3Rpb25Db25maWcudmVyc2lvbnM/LmRyYWZ0cyAmJiBkcmFmdEVuYWJsZWQpIHtcbiAgICAgIHJlc3VsdCA9IGF3YWl0IHJlcGxhY2VXaXRoRHJhZnRJZkF2YWlsYWJsZSh7XG4gICAgICAgIGFjY2Vzc1Jlc3VsdCxcbiAgICAgICAgZG9jOiByZXN1bHQsXG4gICAgICAgIGVudGl0eTogY29sbGVjdGlvbkNvbmZpZyxcbiAgICAgICAgZW50aXR5VHlwZTogJ2NvbGxlY3Rpb24nLFxuICAgICAgICBvdmVycmlkZUFjY2VzcyxcbiAgICAgICAgcmVxLFxuICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8gYmVmb3JlUmVhZCAtIENvbGxlY3Rpb25cbiAgICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICBhd2FpdCBjb2xsZWN0aW9uQ29uZmlnLmhvb2tzLmJlZm9yZVJlYWQucmVkdWNlKGFzeW5jIChwcmlvckhvb2ssIGhvb2spID0+IHtcbiAgICAgIGF3YWl0IHByaW9ySG9va1xuXG4gICAgICByZXN1bHQgPVxuICAgICAgICAoYXdhaXQgaG9vayh7XG4gICAgICAgICAgY29sbGVjdGlvbjogY29sbGVjdGlvbkNvbmZpZyxcbiAgICAgICAgICBjb250ZXh0OiByZXEuY29udGV4dCxcbiAgICAgICAgICBkb2M6IHJlc3VsdCxcbiAgICAgICAgICBxdWVyeTogZmluZE9uZUFyZ3Mud2hlcmUsXG4gICAgICAgICAgcmVxLFxuICAgICAgICB9KSkgfHwgcmVzdWx0XG4gICAgfSwgUHJvbWlzZS5yZXNvbHZlKCkpXG5cbiAgICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8gYWZ0ZXJSZWFkIC0gRmllbGRzXG4gICAgLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgcmVzdWx0ID0gYXdhaXQgYWZ0ZXJSZWFkKHtcbiAgICAgIGNvbGxlY3Rpb246IGNvbGxlY3Rpb25Db25maWcsXG4gICAgICBjb250ZXh0OiByZXEuY29udGV4dCxcbiAgICAgIGN1cnJlbnREZXB0aCxcbiAgICAgIGRlcHRoLFxuICAgICAgZG9jOiByZXN1bHQsXG4gICAgICBnbG9iYWw6IG51bGwsXG4gICAgICBvdmVycmlkZUFjY2VzcyxcbiAgICAgIHJlcSxcbiAgICAgIHNob3dIaWRkZW5GaWVsZHMsXG4gICAgfSlcblxuICAgIC8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLyBhZnRlclJlYWQgLSBDb2xsZWN0aW9uXG4gICAgLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgYXdhaXQgY29sbGVjdGlvbkNvbmZpZy5ob29rcy5hZnRlclJlYWQucmVkdWNlKGFzeW5jIChwcmlvckhvb2ssIGhvb2spID0+IHtcbiAgICAgIGF3YWl0IHByaW9ySG9va1xuXG4gICAgICByZXN1bHQgPVxuICAgICAgICAoYXdhaXQgaG9vayh7XG4gICAgICAgICAgY29sbGVjdGlvbjogY29sbGVjdGlvbkNvbmZpZyxcbiAgICAgICAgICBjb250ZXh0OiByZXEuY29udGV4dCxcbiAgICAgICAgICBkb2M6IHJlc3VsdCxcbiAgICAgICAgICBxdWVyeTogZmluZE9uZUFyZ3Mud2hlcmUsXG4gICAgICAgICAgcmVxLFxuICAgICAgICB9KSkgfHwgcmVzdWx0XG4gICAgfSwgUHJvbWlzZS5yZXNvbHZlKCkpXG5cbiAgICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8gYWZ0ZXJPcGVyYXRpb24gLSBDb2xsZWN0aW9uXG4gICAgLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgcmVzdWx0ID0gYXdhaXQgYnVpbGRBZnRlck9wZXJhdGlvbjxUPih7XG4gICAgICBhcmdzLFxuICAgICAgY29sbGVjdGlvbjogY29sbGVjdGlvbkNvbmZpZyxcbiAgICAgIG9wZXJhdGlvbjogJ2ZpbmRCeUlEJyxcbiAgICAgIHJlc3VsdDogcmVzdWx0IGFzIGFueSxcbiAgICB9KSAvLyBUT0RPOiBmaXggdGhpcyB0eXBpbmdcblxuICAgIC8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLyBSZXR1cm4gcmVzdWx0c1xuICAgIC8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgIGlmIChzaG91bGRDb21taXQpIGF3YWl0IGNvbW1pdFRyYW5zYWN0aW9uKHJlcSlcblxuICAgIHJldHVybiByZXN1bHRcbiAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcbiAgICBhd2FpdCBraWxsVHJhbnNhY3Rpb24ocmVxKVxuICAgIHRocm93IGVycm9yXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZmluZEJ5SURcbiJdLCJuYW1lcyI6WyJmaW5kQnlJRCIsImluY29taW5nQXJncyIsImFyZ3MiLCJjb2xsZWN0aW9uIiwiY29uZmlnIiwiaG9va3MiLCJiZWZvcmVPcGVyYXRpb24iLCJyZWR1Y2UiLCJwcmlvckhvb2siLCJob29rIiwiY29udGV4dCIsInJlcSIsIm9wZXJhdGlvbiIsIlByb21pc2UiLCJyZXNvbHZlIiwiaWQiLCJjb2xsZWN0aW9uQ29uZmlnIiwiY3VycmVudERlcHRoIiwiZGVwdGgiLCJkaXNhYmxlRXJyb3JzIiwiZHJhZnQiLCJkcmFmdEVuYWJsZWQiLCJvdmVycmlkZUFjY2VzcyIsImxvY2FsZSIsInQiLCJzaG93SGlkZGVuRmllbGRzIiwic2hvdWxkQ29tbWl0IiwiaW5pdFRyYW5zYWN0aW9uIiwidHJhbnNhY3Rpb25JRCIsImFjY2Vzc1Jlc3VsdCIsImV4ZWN1dGVBY2Nlc3MiLCJhY2Nlc3MiLCJyZWFkIiwiZmluZE9uZUFyZ3MiLCJzbHVnIiwid2hlcmUiLCJjb21iaW5lUXVlcmllcyIsImVxdWFscyIsImFuZCIsIk5vdEZvdW5kIiwibm9uTWVtb2l6ZWRGaW5kQnlJRCIsInF1ZXJ5IiwicGF5bG9hZCIsImRiIiwiZmluZE9uZSIsIm1lbW9pemUiLCJpc1Byb21pc2UiLCJtYXhTaXplIiwidHJhbnNmb3JtS2V5IiwiSlNPTiIsInN0cmluZ2lmeSIsInJlc3VsdCIsInBhcnNlIiwidmVyc2lvbnMiLCJkcmFmdHMiLCJyZXBsYWNlV2l0aERyYWZ0SWZBdmFpbGFibGUiLCJkb2MiLCJlbnRpdHkiLCJlbnRpdHlUeXBlIiwiYmVmb3JlUmVhZCIsImFmdGVyUmVhZCIsImdsb2JhbCIsImJ1aWxkQWZ0ZXJPcGVyYXRpb24iLCJjb21taXRUcmFuc2FjdGlvbiIsImVycm9yIiwia2lsbFRyYW5zYWN0aW9uIl0sIm1hcHBpbmdzIjoiQUFBQSx1Q0FBdUM7Ozs7K0JBbU52Qzs7O2VBQUE7OztxRUFsTm9CO3NFQU1NO2dDQUNLO3dCQUNOOzJCQUNDO21DQUNRO2lDQUNGO2lDQUNBO29GQUNRO3VCQUNKOzs7Ozs7QUFjcEMsZUFBZUEsU0FBK0JDLFlBQXVCO0lBQ25FLElBQUlDLE9BQU9EO0lBRVgsd0NBQXdDO0lBQ3hDLCtCQUErQjtJQUMvQix3Q0FBd0M7SUFFeEMsTUFBTUMsS0FBS0MsVUFBVSxDQUFDQyxNQUFNLENBQUNDLEtBQUssQ0FBQ0MsZUFBZSxDQUFDQyxNQUFNLENBQUMsT0FBT0MsV0FBV0M7UUFDMUUsTUFBTUQ7UUFFTk4sT0FDRSxBQUFDLE1BQU1PLEtBQUs7WUFDVlA7WUFDQUMsWUFBWUQsS0FBS0MsVUFBVSxDQUFDQyxNQUFNO1lBQ2xDTSxTQUFTUixLQUFLUyxHQUFHLENBQUNELE9BQU87WUFDekJFLFdBQVc7UUFDYixNQUFPVjtJQUNYLEdBQUdXLFFBQVFDLE9BQU87SUFFbEIsTUFBTSxFQUNKQyxFQUFFLEVBQ0ZaLFlBQVksRUFBRUMsUUFBUVksZ0JBQWdCLEVBQUUsRUFDeENDLFlBQVksRUFDWkMsS0FBSyxFQUNMQyxhQUFhLEVBQ2JDLE9BQU9DLGVBQWUsS0FBSyxFQUMzQkMsaUJBQWlCLEtBQUssRUFDdEJYLEtBQUssRUFBRVksTUFBTSxFQUFFQyxDQUFDLEVBQUUsRUFDbEJiLEdBQUcsRUFDSGMsZ0JBQWdCLEVBQ2pCLEdBQUd2QjtJQUVKLElBQUk7UUFDRixNQUFNd0IsZUFBZSxNQUFNQyxJQUFBQSxnQ0FBZSxFQUFDaEI7UUFDM0MsTUFBTSxFQUFFaUIsYUFBYSxFQUFFLEdBQUdqQjtRQUUxQix3Q0FBd0M7UUFDeEMsU0FBUztRQUNULHdDQUF3QztRQUV4QyxNQUFNa0IsZUFBZSxDQUFDUCxpQkFDbEIsTUFBTVEsSUFBQUEsc0JBQWEsRUFBQztZQUFFZjtZQUFJSTtZQUFlUjtRQUFJLEdBQUdLLGlCQUFpQmUsTUFBTSxDQUFDQyxJQUFJLElBQzVFO1FBRUosZ0VBQWdFO1FBQ2hFLElBQUlILGlCQUFpQixPQUFPLE9BQU87UUFFbkMsTUFBTUksY0FBMkI7WUFDL0I5QixZQUFZYSxpQkFBaUJrQixJQUFJO1lBQ2pDWDtZQUNBWixLQUFLO2dCQUNIaUIsZUFBZWpCLElBQUlpQixhQUFhO1lBQ2xDO1lBQ0FPLE9BQU9DLElBQUFBLDhCQUFjLEVBQUM7Z0JBQUVyQixJQUFJO29CQUFFc0IsUUFBUXRCO2dCQUFHO1lBQUUsR0FBR2M7UUFDaEQ7UUFFQSx3Q0FBd0M7UUFDeEMsYUFBYTtRQUNiLHdDQUF3QztRQUV4QyxJQUFJLENBQUNJLFlBQVlFLEtBQUssQ0FBQ0csR0FBRyxDQUFDLEVBQUUsQ0FBQ3ZCLEVBQUUsRUFBRSxNQUFNLElBQUl3QixnQkFBUSxDQUFDZjtRQUVyRCxJQUFJLENBQUNiLElBQUlYLFFBQVEsRUFBRTtZQUNqQlcsSUFBSVgsUUFBUSxHQUFHO2dCQUFFLENBQUM0QixjQUFjLEVBQUUsQ0FBQztZQUFFO1FBQ3ZDLE9BQU8sSUFBSSxDQUFDakIsSUFBSVgsUUFBUSxDQUFDNEIsY0FBYyxFQUFFO1lBQ3ZDakIsSUFBSVgsUUFBUSxDQUFDNEIsY0FBYyxHQUFHLENBQUM7UUFDakM7UUFFQSxJQUFJLENBQUNqQixJQUFJWCxRQUFRLENBQUM0QixjQUFjLENBQUNaLGlCQUFpQmtCLElBQUksQ0FBQyxFQUFFO1lBQ3ZELE1BQU1NLHNCQUFzQixPQUFPQyxRQUF1QjlCLElBQUkrQixPQUFPLENBQUNDLEVBQUUsQ0FBQ0MsT0FBTyxDQUFDSDtZQUVqRjlCLElBQUlYLFFBQVEsQ0FBQzRCLGNBQWMsQ0FBQ1osaUJBQWlCa0IsSUFBSSxDQUFDLEdBQUdXLElBQUFBLHFCQUFPLEVBQUNMLHFCQUFxQjtnQkFDaEZNLFdBQVc7Z0JBQ1hDLFNBQVM7Z0JBQ1QsNkRBQTZEO2dCQUM3RCwyREFBMkQ7Z0JBQzNEQyxjQUFjQyxLQUFLQyxTQUFTO1lBQzlCO1FBQ0Y7UUFFQSxJQUFJQyxTQUFVLE1BQU14QyxJQUFJWCxRQUFRLENBQUM0QixjQUFjLENBQUNaLGlCQUFpQmtCLElBQUksQ0FBQyxDQUFDRDtRQUV2RSxJQUFJLENBQUNrQixRQUFRO1lBQ1gsSUFBSSxDQUFDaEMsZUFBZTtnQkFDbEIsTUFBTSxJQUFJb0IsZ0JBQVEsQ0FBQ2Y7WUFDckI7WUFFQSxPQUFPO1FBQ1Q7UUFFQSxvREFBb0Q7UUFDcEQyQixTQUFTRixLQUFLRyxLQUFLLENBQUNILEtBQUtDLFNBQVMsQ0FBQ0M7UUFFbkMsd0NBQXdDO1FBQ3hDLDJDQUEyQztRQUMzQyx3Q0FBd0M7UUFFeEMsSUFBSW5DLGlCQUFpQnFDLFFBQVEsRUFBRUMsVUFBVWpDLGNBQWM7WUFDckQ4QixTQUFTLE1BQU1JLElBQUFBLG9DQUEyQixFQUFDO2dCQUN6QzFCO2dCQUNBMkIsS0FBS0w7Z0JBQ0xNLFFBQVF6QztnQkFDUjBDLFlBQVk7Z0JBQ1pwQztnQkFDQVg7WUFDRjtRQUNGO1FBRUEsd0NBQXdDO1FBQ3hDLDBCQUEwQjtRQUMxQix3Q0FBd0M7UUFFeEMsTUFBTUssaUJBQWlCWCxLQUFLLENBQUNzRCxVQUFVLENBQUNwRCxNQUFNLENBQUMsT0FBT0MsV0FBV0M7WUFDL0QsTUFBTUQ7WUFFTjJDLFNBQ0UsQUFBQyxNQUFNMUMsS0FBSztnQkFDVk4sWUFBWWE7Z0JBQ1pOLFNBQVNDLElBQUlELE9BQU87Z0JBQ3BCOEMsS0FBS0w7Z0JBQ0xWLE9BQU9SLFlBQVlFLEtBQUs7Z0JBQ3hCeEI7WUFDRixNQUFPd0M7UUFDWCxHQUFHdEMsUUFBUUMsT0FBTztRQUVsQix3Q0FBd0M7UUFDeEMscUJBQXFCO1FBQ3JCLHdDQUF3QztRQUV4Q3FDLFNBQVMsTUFBTVMsSUFBQUEsb0JBQVMsRUFBQztZQUN2QnpELFlBQVlhO1lBQ1pOLFNBQVNDLElBQUlELE9BQU87WUFDcEJPO1lBQ0FDO1lBQ0FzQyxLQUFLTDtZQUNMVSxRQUFRO1lBQ1J2QztZQUNBWDtZQUNBYztRQUNGO1FBRUEsd0NBQXdDO1FBQ3hDLHlCQUF5QjtRQUN6Qix3Q0FBd0M7UUFFeEMsTUFBTVQsaUJBQWlCWCxLQUFLLENBQUN1RCxTQUFTLENBQUNyRCxNQUFNLENBQUMsT0FBT0MsV0FBV0M7WUFDOUQsTUFBTUQ7WUFFTjJDLFNBQ0UsQUFBQyxNQUFNMUMsS0FBSztnQkFDVk4sWUFBWWE7Z0JBQ1pOLFNBQVNDLElBQUlELE9BQU87Z0JBQ3BCOEMsS0FBS0w7Z0JBQ0xWLE9BQU9SLFlBQVlFLEtBQUs7Z0JBQ3hCeEI7WUFDRixNQUFPd0M7UUFDWCxHQUFHdEMsUUFBUUMsT0FBTztRQUVsQix3Q0FBd0M7UUFDeEMsOEJBQThCO1FBQzlCLHdDQUF3QztRQUV4Q3FDLFNBQVMsTUFBTVcsSUFBQUEsMEJBQW1CLEVBQUk7WUFDcEM1RDtZQUNBQyxZQUFZYTtZQUNaSixXQUFXO1lBQ1h1QyxRQUFRQTtRQUNWLEdBQUcsd0JBQXdCOztRQUUzQix3Q0FBd0M7UUFDeEMsaUJBQWlCO1FBQ2pCLHdDQUF3QztRQUV4QyxJQUFJekIsY0FBYyxNQUFNcUMsSUFBQUEsb0NBQWlCLEVBQUNwRDtRQUUxQyxPQUFPd0M7SUFDVCxFQUFFLE9BQU9hLE9BQWdCO1FBQ3ZCLE1BQU1DLElBQUFBLGdDQUFlLEVBQUN0RDtRQUN0QixNQUFNcUQ7SUFDUjtBQUNGO01BRUEsV0FBZWhFIn0=