"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return _default;
    }
});
const _react = /*#__PURE__*/ _interop_require_wildcard(require("react"));
const _reacti18next = require("react-i18next");
const _reactrouterdom = require("react-router-dom");
const _types = require("../../../../fields/config/types");
const _getTranslation = require("../../../../utilities/getTranslation");
const _usePayloadAPI = /*#__PURE__*/ _interop_require_default(require("../../../hooks/usePayloadAPI"));
const _formatDate = require("../../../utilities/formatDate");
const _Gutter = require("../../elements/Gutter");
const _StepNav = require("../../elements/StepNav");
const _Auth = require("../../utilities/Auth");
const _Config = require("../../utilities/Config");
const _DocumentInfo = require("../../utilities/DocumentInfo");
const _Locale = require("../../utilities/Locale");
const _Meta = /*#__PURE__*/ _interop_require_default(require("../../utilities/Meta"));
const _NotFound = /*#__PURE__*/ _interop_require_default(require("../NotFound"));
const _Compare = /*#__PURE__*/ _interop_require_default(require("./Compare"));
const _RenderFieldsToDiff = /*#__PURE__*/ _interop_require_default(require("./RenderFieldsToDiff"));
const _fields = /*#__PURE__*/ _interop_require_default(require("./RenderFieldsToDiff/fields"));
const _Restore = /*#__PURE__*/ _interop_require_default(require("./Restore"));
const _SelectLocales = /*#__PURE__*/ _interop_require_default(require("./SelectLocales"));
require("./index.scss");
const _shared = require("./shared");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {};
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
const baseClass = 'view-version';
const VersionView = ({ collection, global })=>{
    const { admin: { dateFormat }, localization, routes: { admin, api }, serverURL } = (0, _Config.useConfig)();
    const { setStepNav } = (0, _StepNav.useStepNav)();
    const { params: { id, versionID } } = (0, _reactrouterdom.useRouteMatch)();
    const [compareValue, setCompareValue] = (0, _react.useState)(_shared.mostRecentVersionOption);
    const [localeOptions] = (0, _react.useState)(()=>{
        if (localization && localization?.locales) {
            return localization.locales.map(({ code, label })=>({
                    label: label,
                    value: code
                }));
        }
        return [];
    });
    const [locales, setLocales] = (0, _react.useState)(localeOptions);
    const { permissions } = (0, _Auth.useAuth)();
    const { code: locale } = (0, _Locale.useLocale)();
    const { i18n, t } = (0, _reacti18next.useTranslation)('version');
    const { docPermissions } = (0, _DocumentInfo.useDocumentInfo)();
    let originalDocFetchURL;
    let versionFetchURL;
    let entityLabel;
    let fields;
    let fieldPermissions;
    let compareBaseURL;
    let slug;
    let parentID;
    if (collection) {
        ({ slug } = collection);
        originalDocFetchURL = `${serverURL}${api}/${slug}/${id}`;
        versionFetchURL = `${serverURL}${api}/${slug}/versions/${versionID}`;
        compareBaseURL = `${serverURL}${api}/${slug}/versions`;
        entityLabel = (0, _getTranslation.getTranslation)(collection.labels.singular, i18n);
        parentID = id;
        fields = collection.fields;
        fieldPermissions = permissions.collections[collection.slug].fields;
    }
    if (global) {
        ({ slug } = global);
        originalDocFetchURL = `${serverURL}${api}/globals/${slug}`;
        versionFetchURL = `${serverURL}${api}/globals/${slug}/versions/${versionID}`;
        compareBaseURL = `${serverURL}${api}/globals/${slug}/versions`;
        entityLabel = (0, _getTranslation.getTranslation)(global.label, i18n);
        fields = global.fields;
        fieldPermissions = permissions.globals[global.slug].fields;
    }
    const compareFetchURL = compareValue?.value === 'mostRecent' || compareValue?.value === 'published' ? originalDocFetchURL : `${compareBaseURL}/${compareValue.value}`;
    const [{ data: doc, isError }] = (0, _usePayloadAPI.default)(versionFetchURL, {
        initialParams: {
            depth: 1,
            locale: '*'
        }
    });
    const [{ data: publishedDoc }] = (0, _usePayloadAPI.default)(originalDocFetchURL, {
        initialParams: {
            depth: 1,
            locale: '*'
        }
    });
    const [{ data: mostRecentDoc }] = (0, _usePayloadAPI.default)(originalDocFetchURL, {
        initialParams: {
            depth: 1,
            draft: true,
            locale: '*'
        }
    });
    const [{ data: compareDoc }] = (0, _usePayloadAPI.default)(compareFetchURL, {
        initialParams: {
            depth: 1,
            draft: 'true',
            locale: '*'
        }
    });
    (0, _react.useEffect)(()=>{
        let nav = [];
        if (collection) {
            let docLabel = '';
            if (mostRecentDoc) {
                const { useAsTitle } = collection.admin;
                if (useAsTitle !== 'id') {
                    const titleField = collection.fields.find((field)=>(0, _types.fieldAffectsData)(field) && field.name === useAsTitle);
                    if (titleField && mostRecentDoc[useAsTitle]) {
                        if (titleField.localized) {
                            docLabel = mostRecentDoc[useAsTitle]?.[locale];
                        } else {
                            docLabel = mostRecentDoc[useAsTitle];
                        }
                    } else {
                        docLabel = `[${t('general:untitled')}]`;
                    }
                } else {
                    docLabel = mostRecentDoc.id;
                }
            }
            nav = [
                {
                    label: (0, _getTranslation.getTranslation)(collection.labels.plural, i18n),
                    url: `${admin}/collections/${collection.slug}`
                },
                {
                    label: docLabel,
                    url: `${admin}/collections/${collection.slug}/${id}`
                },
                {
                    label: 'Versions',
                    url: `${admin}/collections/${collection.slug}/${id}/versions`
                },
                {
                    label: doc?.createdAt ? (0, _formatDate.formatDate)(doc.createdAt, dateFormat, i18n?.language) : ''
                }
            ];
        }
        if (global) {
            nav = [
                {
                    label: global.label,
                    url: `${admin}/globals/${global.slug}`
                },
                {
                    label: 'Versions',
                    url: `${admin}/globals/${global.slug}/versions`
                },
                {
                    label: doc?.createdAt ? (0, _formatDate.formatDate)(doc.createdAt, dateFormat, i18n?.language) : ''
                }
            ];
        }
        setStepNav(nav);
    }, [
        setStepNav,
        collection,
        global,
        dateFormat,
        doc,
        mostRecentDoc,
        admin,
        id,
        locale,
        t,
        i18n
    ]);
    let metaTitle;
    let metaDesc;
    const formattedCreatedAt = doc?.createdAt ? (0, _formatDate.formatDate)(doc.createdAt, dateFormat, i18n?.language) : '';
    if (collection) {
        const useAsTitle = collection?.admin?.useAsTitle || 'id';
        metaTitle = `${t('version')} - ${formattedCreatedAt} - ${doc[useAsTitle]} - ${entityLabel}`;
        metaDesc = t('viewingVersion', {
            documentTitle: doc[useAsTitle],
            entityLabel
        });
    }
    if (global) {
        metaTitle = `${t('version')} - ${formattedCreatedAt} - ${entityLabel}`;
        metaDesc = t('viewingVersionGlobal', {
            entityLabel
        });
    }
    let comparison = compareDoc?.version;
    if (compareValue?.value === 'mostRecent') {
        comparison = mostRecentDoc;
    }
    if (compareValue?.value === 'published') {
        comparison = publishedDoc;
    }
    const canUpdate = docPermissions?.update?.permission;
    if (isError) {
        return /*#__PURE__*/ _react.default.createElement(_NotFound.default, {
            marginTop: "large"
        });
    }
    return /*#__PURE__*/ _react.default.createElement("main", {
        className: baseClass
    }, /*#__PURE__*/ _react.default.createElement(_Meta.default, {
        description: metaDesc,
        title: metaTitle
    }), /*#__PURE__*/ _react.default.createElement(_Gutter.Gutter, {
        className: `${baseClass}__wrap`
    }, /*#__PURE__*/ _react.default.createElement("div", {
        className: `${baseClass}__header-wrap`
    }, /*#__PURE__*/ _react.default.createElement("p", {
        className: `${baseClass}__created-at`
    }, t('versionCreatedOn', {
        version: t(doc?.autosave ? 'autosavedVersion' : 'version')
    })), /*#__PURE__*/ _react.default.createElement("header", {
        className: `${baseClass}__header`
    }, /*#__PURE__*/ _react.default.createElement("h2", null, formattedCreatedAt), canUpdate && /*#__PURE__*/ _react.default.createElement(_Restore.default, {
        className: `${baseClass}__restore`,
        collection: collection,
        global: global,
        originalDocID: id,
        versionDate: formattedCreatedAt,
        versionID: versionID
    }))), /*#__PURE__*/ _react.default.createElement("div", {
        className: `${baseClass}__controls`
    }, /*#__PURE__*/ _react.default.createElement(_Compare.default, {
        baseURL: compareBaseURL,
        onChange: setCompareValue,
        parentID: parentID,
        publishedDoc: publishedDoc,
        value: compareValue,
        versionID: versionID
    }), localization && /*#__PURE__*/ _react.default.createElement(_SelectLocales.default, {
        onChange: setLocales,
        options: localeOptions,
        value: locales
    })), doc?.version && /*#__PURE__*/ _react.default.createElement(_RenderFieldsToDiff.default, {
        comparison: comparison,
        fieldComponents: _fields.default,
        fieldPermissions: fieldPermissions,
        fields: fields,
        locales: locales ? locales.map(({ label })=>typeof label === 'string' ? label : undefined) : [],
        version: doc?.version
    })));
};
const _default = VersionView;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9hZG1pbi9jb21wb25lbnRzL3ZpZXdzL1ZlcnNpb24vVmVyc2lvbi50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IHVzZVRyYW5zbGF0aW9uIH0gZnJvbSAncmVhY3QtaTE4bmV4dCdcbmltcG9ydCB7IHVzZVJvdXRlTWF0Y2ggfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJ1xuXG5pbXBvcnQgdHlwZSB7IEZpZWxkUGVybWlzc2lvbnMgfSBmcm9tICcuLi8uLi8uLi8uLi9hdXRoJ1xuaW1wb3J0IHR5cGUgeyBGaWVsZCwgRmllbGRBZmZlY3RpbmdEYXRhIH0gZnJvbSAnLi4vLi4vLi4vLi4vZmllbGRzL2NvbmZpZy90eXBlcydcbmltcG9ydCB0eXBlIHsgT3B0aW9uIH0gZnJvbSAnLi4vLi4vZWxlbWVudHMvUmVhY3RTZWxlY3QvdHlwZXMnXG5pbXBvcnQgdHlwZSB7IFN0ZXBOYXZJdGVtIH0gZnJvbSAnLi4vLi4vZWxlbWVudHMvU3RlcE5hdi90eXBlcydcbmltcG9ydCB0eXBlIHsgQ29tcGFyZU9wdGlvbiwgUHJvcHMgfSBmcm9tICcuL3R5cGVzJ1xuXG5pbXBvcnQgeyBmaWVsZEFmZmVjdHNEYXRhIH0gZnJvbSAnLi4vLi4vLi4vLi4vZmllbGRzL2NvbmZpZy90eXBlcydcbmltcG9ydCB7IGdldFRyYW5zbGF0aW9uIH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbGl0aWVzL2dldFRyYW5zbGF0aW9uJ1xuaW1wb3J0IHVzZVBheWxvYWRBUEkgZnJvbSAnLi4vLi4vLi4vaG9va3MvdXNlUGF5bG9hZEFQSSdcbmltcG9ydCB7IGZvcm1hdERhdGUgfSBmcm9tICcuLi8uLi8uLi91dGlsaXRpZXMvZm9ybWF0RGF0ZSdcbmltcG9ydCB7IEd1dHRlciB9IGZyb20gJy4uLy4uL2VsZW1lbnRzL0d1dHRlcidcbmltcG9ydCB7IHVzZVN0ZXBOYXYgfSBmcm9tICcuLi8uLi9lbGVtZW50cy9TdGVwTmF2J1xuaW1wb3J0IHsgdXNlQXV0aCB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy9BdXRoJ1xuaW1wb3J0IHsgdXNlQ29uZmlnIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzL0NvbmZpZydcbmltcG9ydCB7IHVzZURvY3VtZW50SW5mbyB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy9Eb2N1bWVudEluZm8nXG5pbXBvcnQgeyB1c2VMb2NhbGUgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMvTG9jYWxlJ1xuaW1wb3J0IE1ldGEgZnJvbSAnLi4vLi4vdXRpbGl0aWVzL01ldGEnXG5pbXBvcnQgTm90Rm91bmQgZnJvbSAnLi4vTm90Rm91bmQnXG5pbXBvcnQgQ29tcGFyZVZlcnNpb24gZnJvbSAnLi9Db21wYXJlJ1xuaW1wb3J0IFJlbmRlckZpZWxkc1RvRGlmZiBmcm9tICcuL1JlbmRlckZpZWxkc1RvRGlmZidcbmltcG9ydCBmaWVsZENvbXBvbmVudHMgZnJvbSAnLi9SZW5kZXJGaWVsZHNUb0RpZmYvZmllbGRzJ1xuaW1wb3J0IFJlc3RvcmUgZnJvbSAnLi9SZXN0b3JlJ1xuaW1wb3J0IFNlbGVjdExvY2FsZXMgZnJvbSAnLi9TZWxlY3RMb2NhbGVzJ1xuaW1wb3J0ICcuL2luZGV4LnNjc3MnXG5pbXBvcnQgeyBtb3N0UmVjZW50VmVyc2lvbk9wdGlvbiB9IGZyb20gJy4vc2hhcmVkJ1xuXG5jb25zdCBiYXNlQ2xhc3MgPSAndmlldy12ZXJzaW9uJ1xuXG5jb25zdCBWZXJzaW9uVmlldzogUmVhY3QuRkM8UHJvcHM+ID0gKHsgY29sbGVjdGlvbiwgZ2xvYmFsIH0pID0+IHtcbiAgY29uc3Qge1xuICAgIGFkbWluOiB7IGRhdGVGb3JtYXQgfSxcbiAgICBsb2NhbGl6YXRpb24sXG4gICAgcm91dGVzOiB7IGFkbWluLCBhcGkgfSxcbiAgICBzZXJ2ZXJVUkwsXG4gIH0gPSB1c2VDb25maWcoKVxuICBjb25zdCB7IHNldFN0ZXBOYXYgfSA9IHVzZVN0ZXBOYXYoKVxuXG4gIGNvbnN0IHtcbiAgICBwYXJhbXM6IHsgaWQsIHZlcnNpb25JRCB9LFxuICB9ID0gdXNlUm91dGVNYXRjaDx7IGlkPzogc3RyaW5nOyB2ZXJzaW9uSUQ6IHN0cmluZyB9PigpXG5cbiAgY29uc3QgW2NvbXBhcmVWYWx1ZSwgc2V0Q29tcGFyZVZhbHVlXSA9IHVzZVN0YXRlPENvbXBhcmVPcHRpb24+KG1vc3RSZWNlbnRWZXJzaW9uT3B0aW9uKVxuICBjb25zdCBbbG9jYWxlT3B0aW9uc10gPSB1c2VTdGF0ZTxPcHRpb25bXT4oKCkgPT4ge1xuICAgIGlmIChsb2NhbGl6YXRpb24gJiYgbG9jYWxpemF0aW9uPy5sb2NhbGVzKSB7XG4gICAgICByZXR1cm4gbG9jYWxpemF0aW9uLmxvY2FsZXMubWFwKCh7IGNvZGUsIGxhYmVsIH0pID0+ICh7XG4gICAgICAgIGxhYmVsOiBsYWJlbCxcbiAgICAgICAgdmFsdWU6IGNvZGUsXG4gICAgICB9KSlcbiAgICB9XG4gICAgcmV0dXJuIFtdXG4gIH0pXG4gIGNvbnN0IFtsb2NhbGVzLCBzZXRMb2NhbGVzXSA9IHVzZVN0YXRlPE9wdGlvbltdPihsb2NhbGVPcHRpb25zKVxuICBjb25zdCB7IHBlcm1pc3Npb25zIH0gPSB1c2VBdXRoKClcbiAgY29uc3QgeyBjb2RlOiBsb2NhbGUgfSA9IHVzZUxvY2FsZSgpXG4gIGNvbnN0IHsgaTE4biwgdCB9ID0gdXNlVHJhbnNsYXRpb24oJ3ZlcnNpb24nKVxuICBjb25zdCB7IGRvY1Blcm1pc3Npb25zIH0gPSB1c2VEb2N1bWVudEluZm8oKVxuXG4gIGxldCBvcmlnaW5hbERvY0ZldGNoVVJMOiBzdHJpbmdcbiAgbGV0IHZlcnNpb25GZXRjaFVSTDogc3RyaW5nXG4gIGxldCBlbnRpdHlMYWJlbDogc3RyaW5nXG4gIGxldCBmaWVsZHM6IEZpZWxkW11cbiAgbGV0IGZpZWxkUGVybWlzc2lvbnM6IFJlY29yZDxzdHJpbmcsIEZpZWxkUGVybWlzc2lvbnM+XG4gIGxldCBjb21wYXJlQmFzZVVSTDogc3RyaW5nXG4gIGxldCBzbHVnOiBzdHJpbmdcbiAgbGV0IHBhcmVudElEOiBzdHJpbmdcblxuICBpZiAoY29sbGVjdGlvbikge1xuICAgIDsoeyBzbHVnIH0gPSBjb2xsZWN0aW9uKVxuICAgIG9yaWdpbmFsRG9jRmV0Y2hVUkwgPSBgJHtzZXJ2ZXJVUkx9JHthcGl9LyR7c2x1Z30vJHtpZH1gXG4gICAgdmVyc2lvbkZldGNoVVJMID0gYCR7c2VydmVyVVJMfSR7YXBpfS8ke3NsdWd9L3ZlcnNpb25zLyR7dmVyc2lvbklEfWBcbiAgICBjb21wYXJlQmFzZVVSTCA9IGAke3NlcnZlclVSTH0ke2FwaX0vJHtzbHVnfS92ZXJzaW9uc2BcbiAgICBlbnRpdHlMYWJlbCA9IGdldFRyYW5zbGF0aW9uKGNvbGxlY3Rpb24ubGFiZWxzLnNpbmd1bGFyLCBpMThuKVxuICAgIHBhcmVudElEID0gaWRcbiAgICBmaWVsZHMgPSBjb2xsZWN0aW9uLmZpZWxkc1xuICAgIGZpZWxkUGVybWlzc2lvbnMgPSBwZXJtaXNzaW9ucy5jb2xsZWN0aW9uc1tjb2xsZWN0aW9uLnNsdWddLmZpZWxkc1xuICB9XG5cbiAgaWYgKGdsb2JhbCkge1xuICAgIDsoeyBzbHVnIH0gPSBnbG9iYWwpXG4gICAgb3JpZ2luYWxEb2NGZXRjaFVSTCA9IGAke3NlcnZlclVSTH0ke2FwaX0vZ2xvYmFscy8ke3NsdWd9YFxuICAgIHZlcnNpb25GZXRjaFVSTCA9IGAke3NlcnZlclVSTH0ke2FwaX0vZ2xvYmFscy8ke3NsdWd9L3ZlcnNpb25zLyR7dmVyc2lvbklEfWBcbiAgICBjb21wYXJlQmFzZVVSTCA9IGAke3NlcnZlclVSTH0ke2FwaX0vZ2xvYmFscy8ke3NsdWd9L3ZlcnNpb25zYFxuICAgIGVudGl0eUxhYmVsID0gZ2V0VHJhbnNsYXRpb24oZ2xvYmFsLmxhYmVsLCBpMThuKVxuICAgIGZpZWxkcyA9IGdsb2JhbC5maWVsZHNcbiAgICBmaWVsZFBlcm1pc3Npb25zID0gcGVybWlzc2lvbnMuZ2xvYmFsc1tnbG9iYWwuc2x1Z10uZmllbGRzXG4gIH1cblxuICBjb25zdCBjb21wYXJlRmV0Y2hVUkwgPVxuICAgIGNvbXBhcmVWYWx1ZT8udmFsdWUgPT09ICdtb3N0UmVjZW50JyB8fCBjb21wYXJlVmFsdWU/LnZhbHVlID09PSAncHVibGlzaGVkJ1xuICAgICAgPyBvcmlnaW5hbERvY0ZldGNoVVJMXG4gICAgICA6IGAke2NvbXBhcmVCYXNlVVJMfS8ke2NvbXBhcmVWYWx1ZS52YWx1ZX1gXG5cbiAgY29uc3QgW3sgZGF0YTogZG9jLCBpc0Vycm9yIH1dID0gdXNlUGF5bG9hZEFQSSh2ZXJzaW9uRmV0Y2hVUkwsIHtcbiAgICBpbml0aWFsUGFyYW1zOiB7IGRlcHRoOiAxLCBsb2NhbGU6ICcqJyB9LFxuICB9KVxuICBjb25zdCBbeyBkYXRhOiBwdWJsaXNoZWREb2MgfV0gPSB1c2VQYXlsb2FkQVBJKG9yaWdpbmFsRG9jRmV0Y2hVUkwsIHtcbiAgICBpbml0aWFsUGFyYW1zOiB7IGRlcHRoOiAxLCBsb2NhbGU6ICcqJyB9LFxuICB9KVxuICBjb25zdCBbeyBkYXRhOiBtb3N0UmVjZW50RG9jIH1dID0gdXNlUGF5bG9hZEFQSShvcmlnaW5hbERvY0ZldGNoVVJMLCB7XG4gICAgaW5pdGlhbFBhcmFtczogeyBkZXB0aDogMSwgZHJhZnQ6IHRydWUsIGxvY2FsZTogJyonIH0sXG4gIH0pXG4gIGNvbnN0IFt7IGRhdGE6IGNvbXBhcmVEb2MgfV0gPSB1c2VQYXlsb2FkQVBJKGNvbXBhcmVGZXRjaFVSTCwge1xuICAgIGluaXRpYWxQYXJhbXM6IHsgZGVwdGg6IDEsIGRyYWZ0OiAndHJ1ZScsIGxvY2FsZTogJyonIH0sXG4gIH0pXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBsZXQgbmF2OiBTdGVwTmF2SXRlbVtdID0gW11cblxuICAgIGlmIChjb2xsZWN0aW9uKSB7XG4gICAgICBsZXQgZG9jTGFiZWwgPSAnJ1xuXG4gICAgICBpZiAobW9zdFJlY2VudERvYykge1xuICAgICAgICBjb25zdCB7IHVzZUFzVGl0bGUgfSA9IGNvbGxlY3Rpb24uYWRtaW5cblxuICAgICAgICBpZiAodXNlQXNUaXRsZSAhPT0gJ2lkJykge1xuICAgICAgICAgIGNvbnN0IHRpdGxlRmllbGQgPSBjb2xsZWN0aW9uLmZpZWxkcy5maW5kKFxuICAgICAgICAgICAgKGZpZWxkKSA9PiBmaWVsZEFmZmVjdHNEYXRhKGZpZWxkKSAmJiBmaWVsZC5uYW1lID09PSB1c2VBc1RpdGxlLFxuICAgICAgICAgICkgYXMgRmllbGRBZmZlY3RpbmdEYXRhXG5cbiAgICAgICAgICBpZiAodGl0bGVGaWVsZCAmJiBtb3N0UmVjZW50RG9jW3VzZUFzVGl0bGVdKSB7XG4gICAgICAgICAgICBpZiAodGl0bGVGaWVsZC5sb2NhbGl6ZWQpIHtcbiAgICAgICAgICAgICAgZG9jTGFiZWwgPSBtb3N0UmVjZW50RG9jW3VzZUFzVGl0bGVdPy5bbG9jYWxlXVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZG9jTGFiZWwgPSBtb3N0UmVjZW50RG9jW3VzZUFzVGl0bGVdXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRvY0xhYmVsID0gYFske3QoJ2dlbmVyYWw6dW50aXRsZWQnKX1dYFxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkb2NMYWJlbCA9IG1vc3RSZWNlbnREb2MuaWRcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBuYXYgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBsYWJlbDogZ2V0VHJhbnNsYXRpb24oY29sbGVjdGlvbi5sYWJlbHMucGx1cmFsLCBpMThuKSxcbiAgICAgICAgICB1cmw6IGAke2FkbWlufS9jb2xsZWN0aW9ucy8ke2NvbGxlY3Rpb24uc2x1Z31gLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbGFiZWw6IGRvY0xhYmVsLFxuICAgICAgICAgIHVybDogYCR7YWRtaW59L2NvbGxlY3Rpb25zLyR7Y29sbGVjdGlvbi5zbHVnfS8ke2lkfWAsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBsYWJlbDogJ1ZlcnNpb25zJyxcbiAgICAgICAgICB1cmw6IGAke2FkbWlufS9jb2xsZWN0aW9ucy8ke2NvbGxlY3Rpb24uc2x1Z30vJHtpZH0vdmVyc2lvbnNgLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbGFiZWw6IGRvYz8uY3JlYXRlZEF0ID8gZm9ybWF0RGF0ZShkb2MuY3JlYXRlZEF0LCBkYXRlRm9ybWF0LCBpMThuPy5sYW5ndWFnZSkgOiAnJyxcbiAgICAgICAgfSxcbiAgICAgIF1cbiAgICB9XG5cbiAgICBpZiAoZ2xvYmFsKSB7XG4gICAgICBuYXYgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBsYWJlbDogZ2xvYmFsLmxhYmVsLFxuICAgICAgICAgIHVybDogYCR7YWRtaW59L2dsb2JhbHMvJHtnbG9iYWwuc2x1Z31gLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbGFiZWw6ICdWZXJzaW9ucycsXG4gICAgICAgICAgdXJsOiBgJHthZG1pbn0vZ2xvYmFscy8ke2dsb2JhbC5zbHVnfS92ZXJzaW9uc2AsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBsYWJlbDogZG9jPy5jcmVhdGVkQXQgPyBmb3JtYXREYXRlKGRvYy5jcmVhdGVkQXQsIGRhdGVGb3JtYXQsIGkxOG4/Lmxhbmd1YWdlKSA6ICcnLFxuICAgICAgICB9LFxuICAgICAgXVxuICAgIH1cblxuICAgIHNldFN0ZXBOYXYobmF2KVxuICB9LCBbc2V0U3RlcE5hdiwgY29sbGVjdGlvbiwgZ2xvYmFsLCBkYXRlRm9ybWF0LCBkb2MsIG1vc3RSZWNlbnREb2MsIGFkbWluLCBpZCwgbG9jYWxlLCB0LCBpMThuXSlcblxuICBsZXQgbWV0YVRpdGxlOiBzdHJpbmdcbiAgbGV0IG1ldGFEZXNjOiBzdHJpbmdcbiAgY29uc3QgZm9ybWF0dGVkQ3JlYXRlZEF0ID0gZG9jPy5jcmVhdGVkQXRcbiAgICA/IGZvcm1hdERhdGUoZG9jLmNyZWF0ZWRBdCwgZGF0ZUZvcm1hdCwgaTE4bj8ubGFuZ3VhZ2UpXG4gICAgOiAnJ1xuXG4gIGlmIChjb2xsZWN0aW9uKSB7XG4gICAgY29uc3QgdXNlQXNUaXRsZSA9IGNvbGxlY3Rpb24/LmFkbWluPy51c2VBc1RpdGxlIHx8ICdpZCdcbiAgICBtZXRhVGl0bGUgPSBgJHt0KCd2ZXJzaW9uJyl9IC0gJHtmb3JtYXR0ZWRDcmVhdGVkQXR9IC0gJHtkb2NbdXNlQXNUaXRsZV19IC0gJHtlbnRpdHlMYWJlbH1gXG4gICAgbWV0YURlc2MgPSB0KCd2aWV3aW5nVmVyc2lvbicsIHsgZG9jdW1lbnRUaXRsZTogZG9jW3VzZUFzVGl0bGVdLCBlbnRpdHlMYWJlbCB9KVxuICB9XG5cbiAgaWYgKGdsb2JhbCkge1xuICAgIG1ldGFUaXRsZSA9IGAke3QoJ3ZlcnNpb24nKX0gLSAke2Zvcm1hdHRlZENyZWF0ZWRBdH0gLSAke2VudGl0eUxhYmVsfWBcbiAgICBtZXRhRGVzYyA9IHQoJ3ZpZXdpbmdWZXJzaW9uR2xvYmFsJywgeyBlbnRpdHlMYWJlbCB9KVxuICB9XG5cbiAgbGV0IGNvbXBhcmlzb24gPSBjb21wYXJlRG9jPy52ZXJzaW9uXG5cbiAgaWYgKGNvbXBhcmVWYWx1ZT8udmFsdWUgPT09ICdtb3N0UmVjZW50Jykge1xuICAgIGNvbXBhcmlzb24gPSBtb3N0UmVjZW50RG9jXG4gIH1cblxuICBpZiAoY29tcGFyZVZhbHVlPy52YWx1ZSA9PT0gJ3B1Ymxpc2hlZCcpIHtcbiAgICBjb21wYXJpc29uID0gcHVibGlzaGVkRG9jXG4gIH1cblxuICBjb25zdCBjYW5VcGRhdGUgPSBkb2NQZXJtaXNzaW9ucz8udXBkYXRlPy5wZXJtaXNzaW9uXG5cbiAgaWYgKGlzRXJyb3IpIHtcbiAgICByZXR1cm4gPE5vdEZvdW5kIG1hcmdpblRvcD1cImxhcmdlXCIgLz5cbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPG1haW4gY2xhc3NOYW1lPXtiYXNlQ2xhc3N9PlxuICAgICAgPE1ldGEgZGVzY3JpcHRpb249e21ldGFEZXNjfSB0aXRsZT17bWV0YVRpdGxlfSAvPlxuICAgICAgPEd1dHRlciBjbGFzc05hbWU9e2Ake2Jhc2VDbGFzc31fX3dyYXBgfT5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake2Jhc2VDbGFzc31fX2hlYWRlci13cmFwYH0+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPXtgJHtiYXNlQ2xhc3N9X19jcmVhdGVkLWF0YH0+XG4gICAgICAgICAgICB7dCgndmVyc2lvbkNyZWF0ZWRPbicsIHtcbiAgICAgICAgICAgICAgdmVyc2lvbjogdChkb2M/LmF1dG9zYXZlID8gJ2F1dG9zYXZlZFZlcnNpb24nIDogJ3ZlcnNpb24nKSxcbiAgICAgICAgICAgIH0pfVxuICAgICAgICAgIDwvcD5cbiAgICAgICAgICA8aGVhZGVyIGNsYXNzTmFtZT17YCR7YmFzZUNsYXNzfV9faGVhZGVyYH0+XG4gICAgICAgICAgICA8aDI+e2Zvcm1hdHRlZENyZWF0ZWRBdH08L2gyPlxuICAgICAgICAgICAge2NhblVwZGF0ZSAmJiAoXG4gICAgICAgICAgICAgIDxSZXN0b3JlXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtiYXNlQ2xhc3N9X19yZXN0b3JlYH1cbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uPXtjb2xsZWN0aW9ufVxuICAgICAgICAgICAgICAgIGdsb2JhbD17Z2xvYmFsfVxuICAgICAgICAgICAgICAgIG9yaWdpbmFsRG9jSUQ9e2lkfVxuICAgICAgICAgICAgICAgIHZlcnNpb25EYXRlPXtmb3JtYXR0ZWRDcmVhdGVkQXR9XG4gICAgICAgICAgICAgICAgdmVyc2lvbklEPXt2ZXJzaW9uSUR9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvaGVhZGVyPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake2Jhc2VDbGFzc31fX2NvbnRyb2xzYH0+XG4gICAgICAgICAgPENvbXBhcmVWZXJzaW9uXG4gICAgICAgICAgICBiYXNlVVJMPXtjb21wYXJlQmFzZVVSTH1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXtzZXRDb21wYXJlVmFsdWV9XG4gICAgICAgICAgICBwYXJlbnRJRD17cGFyZW50SUR9XG4gICAgICAgICAgICBwdWJsaXNoZWREb2M9e3B1Ymxpc2hlZERvY31cbiAgICAgICAgICAgIHZhbHVlPXtjb21wYXJlVmFsdWV9XG4gICAgICAgICAgICB2ZXJzaW9uSUQ9e3ZlcnNpb25JRH1cbiAgICAgICAgICAvPlxuICAgICAgICAgIHtsb2NhbGl6YXRpb24gJiYgKFxuICAgICAgICAgICAgPFNlbGVjdExvY2FsZXMgb25DaGFuZ2U9e3NldExvY2FsZXN9IG9wdGlvbnM9e2xvY2FsZU9wdGlvbnN9IHZhbHVlPXtsb2NhbGVzfSAvPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIHtkb2M/LnZlcnNpb24gJiYgKFxuICAgICAgICAgIDxSZW5kZXJGaWVsZHNUb0RpZmZcbiAgICAgICAgICAgIGNvbXBhcmlzb249e2NvbXBhcmlzb259XG4gICAgICAgICAgICBmaWVsZENvbXBvbmVudHM9e2ZpZWxkQ29tcG9uZW50c31cbiAgICAgICAgICAgIGZpZWxkUGVybWlzc2lvbnM9e2ZpZWxkUGVybWlzc2lvbnN9XG4gICAgICAgICAgICBmaWVsZHM9e2ZpZWxkc31cbiAgICAgICAgICAgIGxvY2FsZXM9e1xuICAgICAgICAgICAgICBsb2NhbGVzXG4gICAgICAgICAgICAgICAgPyBsb2NhbGVzLm1hcCgoeyBsYWJlbCB9KSA9PiAodHlwZW9mIGxhYmVsID09PSAnc3RyaW5nJyA/IGxhYmVsIDogdW5kZWZpbmVkKSlcbiAgICAgICAgICAgICAgICA6IFtdXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2ZXJzaW9uPXtkb2M/LnZlcnNpb259XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cbiAgICAgIDwvR3V0dGVyPlxuICAgIDwvbWFpbj5cbiAgKVxufVxuXG5leHBvcnQgZGVmYXVsdCBWZXJzaW9uVmlld1xuIl0sIm5hbWVzIjpbImJhc2VDbGFzcyIsIlZlcnNpb25WaWV3IiwiY29sbGVjdGlvbiIsImdsb2JhbCIsImFkbWluIiwiZGF0ZUZvcm1hdCIsImxvY2FsaXphdGlvbiIsInJvdXRlcyIsImFwaSIsInNlcnZlclVSTCIsInVzZUNvbmZpZyIsInNldFN0ZXBOYXYiLCJ1c2VTdGVwTmF2IiwicGFyYW1zIiwiaWQiLCJ2ZXJzaW9uSUQiLCJ1c2VSb3V0ZU1hdGNoIiwiY29tcGFyZVZhbHVlIiwic2V0Q29tcGFyZVZhbHVlIiwidXNlU3RhdGUiLCJtb3N0UmVjZW50VmVyc2lvbk9wdGlvbiIsImxvY2FsZU9wdGlvbnMiLCJsb2NhbGVzIiwibWFwIiwiY29kZSIsImxhYmVsIiwidmFsdWUiLCJzZXRMb2NhbGVzIiwicGVybWlzc2lvbnMiLCJ1c2VBdXRoIiwibG9jYWxlIiwidXNlTG9jYWxlIiwiaTE4biIsInQiLCJ1c2VUcmFuc2xhdGlvbiIsImRvY1Blcm1pc3Npb25zIiwidXNlRG9jdW1lbnRJbmZvIiwib3JpZ2luYWxEb2NGZXRjaFVSTCIsInZlcnNpb25GZXRjaFVSTCIsImVudGl0eUxhYmVsIiwiZmllbGRzIiwiZmllbGRQZXJtaXNzaW9ucyIsImNvbXBhcmVCYXNlVVJMIiwic2x1ZyIsInBhcmVudElEIiwiZ2V0VHJhbnNsYXRpb24iLCJsYWJlbHMiLCJzaW5ndWxhciIsImNvbGxlY3Rpb25zIiwiZ2xvYmFscyIsImNvbXBhcmVGZXRjaFVSTCIsImRhdGEiLCJkb2MiLCJpc0Vycm9yIiwidXNlUGF5bG9hZEFQSSIsImluaXRpYWxQYXJhbXMiLCJkZXB0aCIsInB1Ymxpc2hlZERvYyIsIm1vc3RSZWNlbnREb2MiLCJkcmFmdCIsImNvbXBhcmVEb2MiLCJ1c2VFZmZlY3QiLCJuYXYiLCJkb2NMYWJlbCIsInVzZUFzVGl0bGUiLCJ0aXRsZUZpZWxkIiwiZmluZCIsImZpZWxkIiwiZmllbGRBZmZlY3RzRGF0YSIsIm5hbWUiLCJsb2NhbGl6ZWQiLCJwbHVyYWwiLCJ1cmwiLCJjcmVhdGVkQXQiLCJmb3JtYXREYXRlIiwibGFuZ3VhZ2UiLCJtZXRhVGl0bGUiLCJtZXRhRGVzYyIsImZvcm1hdHRlZENyZWF0ZWRBdCIsImRvY3VtZW50VGl0bGUiLCJjb21wYXJpc29uIiwidmVyc2lvbiIsImNhblVwZGF0ZSIsInVwZGF0ZSIsInBlcm1pc3Npb24iLCJOb3RGb3VuZCIsIm1hcmdpblRvcCIsIm1haW4iLCJjbGFzc05hbWUiLCJNZXRhIiwiZGVzY3JpcHRpb24iLCJ0aXRsZSIsIkd1dHRlciIsImRpdiIsInAiLCJhdXRvc2F2ZSIsImhlYWRlciIsImgyIiwiUmVzdG9yZSIsIm9yaWdpbmFsRG9jSUQiLCJ2ZXJzaW9uRGF0ZSIsIkNvbXBhcmVWZXJzaW9uIiwiYmFzZVVSTCIsIm9uQ2hhbmdlIiwiU2VsZWN0TG9jYWxlcyIsIm9wdGlvbnMiLCJSZW5kZXJGaWVsZHNUb0RpZmYiLCJmaWVsZENvbXBvbmVudHMiLCJ1bmRlZmluZWQiXSwibWFwcGluZ3MiOiI7Ozs7K0JBeVFBOzs7ZUFBQTs7OytEQXpRMkM7OEJBQ1o7Z0NBQ0Q7dUJBUUc7Z0NBQ0Y7c0VBQ0w7NEJBQ0M7d0JBQ0o7eUJBQ0k7c0JBQ0g7d0JBQ0U7OEJBQ007d0JBQ047NkRBQ1Q7aUVBQ0k7Z0VBQ007MkVBQ0k7K0RBQ0g7Z0VBQ1I7c0VBQ007UUFDbkI7d0JBQ2lDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFeEMsTUFBTUEsWUFBWTtBQUVsQixNQUFNQyxjQUErQixDQUFDLEVBQUVDLFVBQVUsRUFBRUMsTUFBTSxFQUFFO0lBQzFELE1BQU0sRUFDSkMsT0FBTyxFQUFFQyxVQUFVLEVBQUUsRUFDckJDLFlBQVksRUFDWkMsUUFBUSxFQUFFSCxLQUFLLEVBQUVJLEdBQUcsRUFBRSxFQUN0QkMsU0FBUyxFQUNWLEdBQUdDLElBQUFBLGlCQUFTO0lBQ2IsTUFBTSxFQUFFQyxVQUFVLEVBQUUsR0FBR0MsSUFBQUEsbUJBQVU7SUFFakMsTUFBTSxFQUNKQyxRQUFRLEVBQUVDLEVBQUUsRUFBRUMsU0FBUyxFQUFFLEVB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