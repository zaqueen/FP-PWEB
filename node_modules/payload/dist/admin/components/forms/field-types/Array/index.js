"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return _default;
    }
});
const _react = /*#__PURE__*/ _interop_require_wildcard(require("react"));
const _reacti18next = require("react-i18next");
const _validations = require("../../../../../fields/validations");
const _getTranslation = require("../../../../../utilities/getTranslation");
const _scrollToID = require("../../../../utilities/scrollToID");
const _Banner = /*#__PURE__*/ _interop_require_default(require("../../../elements/Banner"));
const _Button = /*#__PURE__*/ _interop_require_default(require("../../../elements/Button"));
const _DraggableSortable = /*#__PURE__*/ _interop_require_default(require("../../../elements/DraggableSortable"));
const _DraggableSortableItem = /*#__PURE__*/ _interop_require_default(require("../../../elements/DraggableSortable/DraggableSortableItem"));
const _ErrorPill = require("../../../elements/ErrorPill");
const _Config = require("../../../utilities/Config");
const _DocumentInfo = require("../../../utilities/DocumentInfo");
const _Locale = require("../../../utilities/Locale");
const _Error = /*#__PURE__*/ _interop_require_default(require("../../Error"));
const _FieldDescription = /*#__PURE__*/ _interop_require_default(require("../../FieldDescription"));
const _context = require("../../Form/context");
const _NullifyField = require("../../NullifyField");
const _useField = /*#__PURE__*/ _interop_require_default(require("../../useField"));
const _withCondition = /*#__PURE__*/ _interop_require_default(require("../../withCondition"));
const _shared = require("../shared");
const _ArrayRow = require("./ArrayRow");
require("./index.scss");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {};
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
const baseClass = 'array-field';
const ArrayFieldType = (props)=>{
    const { name, admin: { className, components, condition, description, readOnly }, fieldTypes, fields, forceRender = false, indexPath, localized, maxRows, minRows, path: pathFromProps, permissions, required, validate = _validations.array } = props;
    const path = pathFromProps || name;
    // eslint-disable-next-line react/destructuring-assignment
    const label = props?.label ?? props?.labels?.singular;
    const CustomRowLabel = components?.RowLabel || undefined;
    const { setDocFieldPreferences } = (0, _DocumentInfo.useDocumentInfo)();
    const { addFieldRow, dispatchFields, removeFieldRow, setModified } = (0, _context.useForm)();
    const submitted = (0, _context.useFormSubmitted)();
    const { code: locale } = (0, _Locale.useLocale)();
    const { i18n, t } = (0, _reacti18next.useTranslation)('fields');
    const { localization } = (0, _Config.useConfig)();
    const editingDefaultLocale = (()=>{
        if (localization && localization.fallback) {
            const defaultLocale = localization.defaultLocale || 'en';
            return locale === defaultLocale;
        }
        return true;
    })();
    // Handle labeling for Arrays, Global Arrays, and Blocks
    const getLabels = (p)=>{
        if (p?.labels) return p.labels;
        if (p?.label) return {
            plural: undefined,
            singular: p.label
        };
        return {
            plural: t('rows'),
            singular: t('row')
        };
    };
    const labels = getLabels(props);
    const memoizedValidate = (0, _react.useCallback)((value, options)=>{
        // alternative locales can be null
        if (!editingDefaultLocale && value === null) {
            return true;
        }
        return validate(value, {
            ...options,
            maxRows,
            minRows,
            required
        });
    }, [
        maxRows,
        minRows,
        required,
        validate,
        editingDefaultLocale
    ]);
    const { errorMessage, rows = [], showError, valid, value } = (0, _useField.default)({
        condition,
        hasRows: true,
        path,
        validate: memoizedValidate
    });
    const addRow = (0, _react.useCallback)(async (rowIndex)=>{
        await addFieldRow({
            path,
            rowIndex
        });
        setModified(true);
        setTimeout(()=>{
            (0, _scrollToID.scrollToID)(`${path}-row-${rowIndex + 1}`);
        }, 0);
    }, [
        addFieldRow,
        path,
        setModified
    ]);
    const duplicateRow = (0, _react.useCallback)((rowIndex)=>{
        dispatchFields({
            path,
            rowIndex,
            type: 'DUPLICATE_ROW'
        });
        setModified(true);
        setTimeout(()=>{
            (0, _scrollToID.scrollToID)(`${path}-row-${rowIndex}`);
        }, 0);
    }, [
        dispatchFields,
        path,
        setModified
    ]);
    const removeRow = (0, _react.useCallback)((rowIndex)=>{
        removeFieldRow({
            path,
            rowIndex
        });
        setModified(true);
    }, [
        removeFieldRow,
        path,
        setModified
    ]);
    const moveRow = (0, _react.useCallback)((moveFromIndex, moveToIndex)=>{
        dispatchFields({
            moveFromIndex,
            moveToIndex,
            path,
            type: 'MOVE_ROW'
        });
        setModified(true);
    }, [
        dispatchFields,
        path,
        setModified
    ]);
    const toggleCollapseAll = (0, _react.useCallback)((collapsed)=>{
        dispatchFields({
            collapsed,
            path,
            setDocFieldPreferences,
            type: 'SET_ALL_ROWS_COLLAPSED'
        });
    }, [
        dispatchFields,
        path,
        setDocFieldPreferences
    ]);
    const setCollapse = (0, _react.useCallback)((rowID, collapsed)=>{
        dispatchFields({
            collapsed,
            path,
            rowID,
            setDocFieldPreferences,
            type: 'SET_ROW_COLLAPSED'
        });
    }, [
        dispatchFields,
        path,
        setDocFieldPreferences
    ]);
    const hasMaxRows = maxRows && rows.length >= maxRows;
    const fieldErrorCount = rows.reduce((total, row)=>total + (row?.childErrorPaths?.size || 0), 0) + (valid ? 0 : 1);
    const fieldHasErrors = submitted && fieldErrorCount > 0;
    const showRequired = readOnly && rows.length === 0;
    const showMinRows = rows.length < minRows || required && rows.length === 0;
    return /*#__PURE__*/ _react.default.createElement("div", {
        className: [
            _shared.fieldBaseClass,
            baseClass,
            className,
            fieldHasErrors ? `${baseClass}--has-error` : `${baseClass}--has-no-error`
        ].filter(Boolean).join(' '),
        id: `field-${path.replace(/\./g, '__')}`
    }, showError && /*#__PURE__*/ _react.default.createElement("div", {
        className: `${baseClass}__error-wrap`
    }, /*#__PURE__*/ _react.default.createElement(_Error.default, {
        message: errorMessage,
        showError: showError
    })), /*#__PURE__*/ _react.default.createElement("header", {
        className: `${baseClass}__header`
    }, /*#__PURE__*/ _react.default.createElement("div", {
        className: `${baseClass}__header-wrap`
    }, /*#__PURE__*/ _react.default.createElement("div", {
        className: `${baseClass}__header-content`
    }, /*#__PURE__*/ _react.default.createElement("h3", {
        className: `${baseClass}__title`
    }, (0, _getTranslation.getTranslation)(label || name, i18n)), fieldHasErrors && fieldErrorCount > 0 && /*#__PURE__*/ _react.default.createElement(_ErrorPill.ErrorPill, {
        count: fieldErrorCount,
        withMessage: true
    })), rows.length > 0 && /*#__PURE__*/ _react.default.createElement("ul", {
        className: `${baseClass}__header-actions`
    }, /*#__PURE__*/ _react.default.createElement("li", null, /*#__PURE__*/ _react.default.createElement("button", {
        className: `${baseClass}__header-action`,
        onClick: ()=>toggleCollapseAll(true),
        type: "button"
    }, t('collapseAll'))), /*#__PURE__*/ _react.default.createElement("li", null, /*#__PURE__*/ _react.default.createElement("button", {
        className: `${baseClass}__header-action`,
        onClick: ()=>toggleCollapseAll(false),
        type: "button"
    }, t('showAll'))))), /*#__PURE__*/ _react.default.createElement(_FieldDescription.default, {
        className: `field-description-${path.replace(/\./g, '__')}`,
        description: description,
        value: value
    })), /*#__PURE__*/ _react.default.createElement(_NullifyField.NullifyLocaleField, {
        fieldValue: value,
        localized: localized,
        path: path
    }), (rows.length > 0 || !valid && (showRequired || showMinRows)) && /*#__PURE__*/ _react.default.createElement(_DraggableSortable.default, {
        className: `${baseClass}__draggable-rows`,
        ids: rows.map((row)=>row.id),
        onDragEnd: ({ moveFromIndex, moveToIndex })=>moveRow(moveFromIndex, moveToIndex)
    }, rows.map((row, i)=>/*#__PURE__*/ _react.default.createElement(_DraggableSortableItem.default, {
            disabled: readOnly,
            id: row.id,
            key: row.id
        }, (draggableSortableItemProps)=>/*#__PURE__*/ _react.default.createElement(_ArrayRow.ArrayRow, {
                ...draggableSortableItemProps,
                CustomRowLabel: CustomRowLabel,
                addRow: addRow,
                duplicateRow: duplicateRow,
                fieldTypes: fieldTypes,
                fields: fields,
                forceRender: forceRender,
                hasMaxRows: hasMaxRows,
                indexPath: indexPath,
                labels: labels,
                moveRow: moveRow,
                path: path,
                permissions: permissions,
                readOnly: readOnly,
                removeRow: removeRow,
                row: row,
                rowCount: rows.length,
                rowIndex: i,
                setCollapse: setCollapse
            }))), !valid && /*#__PURE__*/ _react.default.createElement(_react.default.Fragment, null, showRequired && /*#__PURE__*/ _react.default.createElement(_Banner.default, null, t('validation:fieldHasNo', {
        label: (0, _getTranslation.getTranslation)(labels.plural, i18n)
    })), showMinRows && /*#__PURE__*/ _react.default.createElement(_Banner.default, {
        type: "error"
    }, t('validation:requiresAtLeast', {
        count: minRows,
        label: (0, _getTranslation.getTranslation)(minRows ? labels.plural : labels.singular, i18n) || t(minRows > 1 ? 'general:row' : 'general:rows')
    })))), !readOnly && !hasMaxRows && /*#__PURE__*/ _react.default.createElement(_Button.default, {
        buttonStyle: "icon-label",
        className: `${baseClass}__add-row`,
        icon: "plus",
        iconPosition: "left",
        iconStyle: "with-border",
        onClick: ()=>addRow(value || 0)
    }, t('addLabel', {
        label: (0, _getTranslation.getTranslation)(labels.singular, i18n)
    })));
};
const _default = (0, _withCondition.default)(ArrayFieldType);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9hZG1pbi9jb21wb25lbnRzL2Zvcm1zL2ZpZWxkLXR5cGVzL0FycmF5L2luZGV4LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IHVzZVRyYW5zbGF0aW9uIH0gZnJvbSAncmVhY3QtaTE4bmV4dCdcblxuaW1wb3J0IHR5cGUgeyBQcm9wcyB9IGZyb20gJy4vdHlwZXMnXG5cbmltcG9ydCB7IGFycmF5IH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vZmllbGRzL3ZhbGlkYXRpb25zJ1xuaW1wb3J0IHsgZ2V0VHJhbnNsYXRpb24gfSBmcm9tICcuLi8uLi8uLi8uLi8uLi91dGlsaXRpZXMvZ2V0VHJhbnNsYXRpb24nXG5pbXBvcnQgeyBzY3JvbGxUb0lEIH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbGl0aWVzL3Njcm9sbFRvSUQnXG5pbXBvcnQgQmFubmVyIGZyb20gJy4uLy4uLy4uL2VsZW1lbnRzL0Jhbm5lcidcbmltcG9ydCBCdXR0b24gZnJvbSAnLi4vLi4vLi4vZWxlbWVudHMvQnV0dG9uJ1xuaW1wb3J0IERyYWdnYWJsZVNvcnRhYmxlIGZyb20gJy4uLy4uLy4uL2VsZW1lbnRzL0RyYWdnYWJsZVNvcnRhYmxlJ1xuaW1wb3J0IERyYWdnYWJsZVNvcnRhYmxlSXRlbSBmcm9tICcuLi8uLi8uLi9lbGVtZW50cy9EcmFnZ2FibGVTb3J0YWJsZS9EcmFnZ2FibGVTb3J0YWJsZUl0ZW0nXG5pbXBvcnQgeyBFcnJvclBpbGwgfSBmcm9tICcuLi8uLi8uLi9lbGVtZW50cy9FcnJvclBpbGwnXG5pbXBvcnQgeyB1c2VDb25maWcgfSBmcm9tICcuLi8uLi8uLi91dGlsaXRpZXMvQ29uZmlnJ1xuaW1wb3J0IHsgdXNlRG9jdW1lbnRJbmZvIH0gZnJvbSAnLi4vLi4vLi4vdXRpbGl0aWVzL0RvY3VtZW50SW5mbydcbmltcG9ydCB7IHVzZUxvY2FsZSB9IGZyb20gJy4uLy4uLy4uL3V0aWxpdGllcy9Mb2NhbGUnXG5pbXBvcnQgRXJyb3IgZnJvbSAnLi4vLi4vRXJyb3InXG5pbXBvcnQgRmllbGREZXNjcmlwdGlvbiBmcm9tICcuLi8uLi9GaWVsZERlc2NyaXB0aW9uJ1xuaW1wb3J0IHsgdXNlRm9ybSwgdXNlRm9ybVN1Ym1pdHRlZCB9IGZyb20gJy4uLy4uL0Zvcm0vY29udGV4dCdcbmltcG9ydCB7IE51bGxpZnlMb2NhbGVGaWVsZCB9IGZyb20gJy4uLy4uL051bGxpZnlGaWVsZCdcbmltcG9ydCB1c2VGaWVsZCBmcm9tICcuLi8uLi91c2VGaWVsZCdcbmltcG9ydCB3aXRoQ29uZGl0aW9uIGZyb20gJy4uLy4uL3dpdGhDb25kaXRpb24nXG5pbXBvcnQgeyBmaWVsZEJhc2VDbGFzcyB9IGZyb20gJy4uL3NoYXJlZCdcbmltcG9ydCB7IEFycmF5Um93IH0gZnJvbSAnLi9BcnJheVJvdydcbmltcG9ydCAnLi9pbmRleC5zY3NzJ1xuXG5jb25zdCBiYXNlQ2xhc3MgPSAnYXJyYXktZmllbGQnXG5cbmNvbnN0IEFycmF5RmllbGRUeXBlOiBSZWFjdC5GQzxQcm9wcz4gPSAocHJvcHMpID0+IHtcbiAgY29uc3Qge1xuICAgIG5hbWUsXG4gICAgYWRtaW46IHsgY2xhc3NOYW1lLCBjb21wb25lbnRzLCBjb25kaXRpb24sIGRlc2NyaXB0aW9uLCByZWFkT25seSB9LFxuICAgIGZpZWxkVHlwZXMsXG4gICAgZmllbGRzLFxuICAgIGZvcmNlUmVuZGVyID0gZmFsc2UsXG4gICAgaW5kZXhQYXRoLFxuICAgIGxvY2FsaXplZCxcbiAgICBtYXhSb3dzLFxuICAgIG1pblJvd3MsXG4gICAgcGF0aDogcGF0aEZyb21Qcm9wcyxcbiAgICBwZXJtaXNzaW9ucyxcbiAgICByZXF1aXJlZCxcbiAgICB2YWxpZGF0ZSA9IGFycmF5LFxuICB9ID0gcHJvcHNcblxuICBjb25zdCBwYXRoID0gcGF0aEZyb21Qcm9wcyB8fCBuYW1lXG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0L2Rlc3RydWN0dXJpbmctYXNzaWdubWVudFxuICBjb25zdCBsYWJlbCA9IHByb3BzPy5sYWJlbCA/PyBwcm9wcz8ubGFiZWxzPy5zaW5ndWxhclxuXG4gIGNvbnN0IEN1c3RvbVJvd0xhYmVsID0gY29tcG9uZW50cz8uUm93TGFiZWwgfHwgdW5kZWZpbmVkXG5cbiAgY29uc3QgeyBzZXREb2NGaWVsZFByZWZlcmVuY2VzIH0gPSB1c2VEb2N1bWVudEluZm8oKVxuICBjb25zdCB7IGFkZEZpZWxkUm93LCBkaXNwYXRjaEZpZWxkcywgcmVtb3ZlRmllbGRSb3csIHNldE1vZGlmaWVkIH0gPSB1c2VGb3JtKClcbiAgY29uc3Qgc3VibWl0dGVkID0gdXNlRm9ybVN1Ym1pdHRlZCgpXG4gIGNvbnN0IHsgY29kZTogbG9jYWxlIH0gPSB1c2VMb2NhbGUoKVxuICBjb25zdCB7IGkxOG4sIHQgfSA9IHVzZVRyYW5zbGF0aW9uKCdmaWVsZHMnKVxuICBjb25zdCB7IGxvY2FsaXphdGlvbiB9ID0gdXNlQ29uZmlnKClcblxuICBjb25zdCBlZGl0aW5nRGVmYXVsdExvY2FsZSA9ICgoKSA9PiB7XG4gICAgaWYgKGxvY2FsaXphdGlvbiAmJiBsb2NhbGl6YXRpb24uZmFsbGJhY2spIHtcbiAgICAgIGNvbnN0IGRlZmF1bHRMb2NhbGUgPSBsb2NhbGl6YXRpb24uZGVmYXVsdExvY2FsZSB8fCAnZW4nXG4gICAgICByZXR1cm4gbG9jYWxlID09PSBkZWZhdWx0TG9jYWxlXG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWVcbiAgfSkoKVxuXG4gIC8vIEhhbmRsZSBsYWJlbGluZyBmb3IgQXJyYXlzLCBHbG9iYWwgQXJyYXlzLCBhbmQgQmxvY2tzXG4gIGNvbnN0IGdldExhYmVscyA9IChwOiBQcm9wcykgPT4ge1xuICAgIGlmIChwPy5sYWJlbHMpIHJldHVybiBwLmxhYmVsc1xuICAgIGlmIChwPy5sYWJlbCkgcmV0dXJuIHsgcGx1cmFsOiB1bmRlZmluZWQsIHNpbmd1bGFyOiBwLmxhYmVsIH1cbiAgICByZXR1cm4geyBwbHVyYWw6IHQoJ3Jvd3MnKSwgc2luZ3VsYXI6IHQoJ3JvdycpIH1cbiAgfVxuXG4gIGNvbnN0IGxhYmVscyA9IGdldExhYmVscyhwcm9wcylcblxuICBjb25zdCBtZW1vaXplZFZhbGlkYXRlID0gdXNlQ2FsbGJhY2soXG4gICAgKHZhbHVlLCBvcHRpb25zKSA9PiB7XG4gICAgICAvLyBhbHRlcm5hdGl2ZSBsb2NhbGVzIGNhbiBiZSBudWxsXG4gICAgICBpZiAoIWVkaXRpbmdEZWZhdWx0TG9jYWxlICYmIHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsaWRhdGUodmFsdWUsIHsgLi4ub3B0aW9ucywgbWF4Um93cywgbWluUm93cywgcmVxdWlyZWQgfSlcbiAgICB9LFxuICAgIFttYXhSb3dzLCBtaW5Sb3dzLCByZXF1aXJlZCwgdmFsaWRhdGUsIGVkaXRpbmdEZWZhdWx0TG9jYWxlXSxcbiAgKVxuXG4gIGNvbnN0IHtcbiAgICBlcnJvck1lc3NhZ2UsXG4gICAgcm93cyA9IFtdLFxuICAgIHNob3dFcnJvcixcbiAgICB2YWxpZCxcbiAgICB2YWx1ZSxcbiAgfSA9IHVzZUZpZWxkPG51bWJlcj4oe1xuICAgIGNvbmRpdGlvbixcbiAgICBoYXNSb3dzOiB0cnVlLFxuICAgIHBhdGgsXG4gICAgdmFsaWRhdGU6IG1lbW9pemVkVmFsaWRhdGUsXG4gIH0pXG5cbiAgY29uc3QgYWRkUm93ID0gdXNlQ2FsbGJhY2soXG4gICAgYXN5bmMgKHJvd0luZGV4OiBudW1iZXIpID0+IHtcbiAgICAgIGF3YWl0IGFkZEZpZWxkUm93KHsgcGF0aCwgcm93SW5kZXggfSlcbiAgICAgIHNldE1vZGlmaWVkKHRydWUpXG5cbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBzY3JvbGxUb0lEKGAke3BhdGh9LXJvdy0ke3Jvd0luZGV4ICsgMX1gKVxuICAgICAgfSwgMClcbiAgICB9LFxuICAgIFthZGRGaWVsZFJvdywgcGF0aCwgc2V0TW9kaWZpZWRdLFxuICApXG5cbiAgY29uc3QgZHVwbGljYXRlUm93ID0gdXNlQ2FsbGJhY2soXG4gICAgKHJvd0luZGV4OiBudW1iZXIpID0+IHtcbiAgICAgIGRpc3BhdGNoRmllbGRzKHsgcGF0aCwgcm93SW5kZXgsIHR5cGU6ICdEVVBMSUNBVEVfUk9XJyB9KVxuICAgICAgc2V0TW9kaWZpZWQodHJ1ZSlcblxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHNjcm9sbFRvSUQoYCR7cGF0aH0tcm93LSR7cm93SW5kZXh9YClcbiAgICAgIH0sIDApXG4gICAgfSxcbiAgICBbZGlzcGF0Y2hGaWVsZHMsIHBhdGgsIHNldE1vZGlmaWVkXSxcbiAgKVxuXG4gIGNvbnN0IHJlbW92ZVJvdyA9IHVzZUNhbGxiYWNrKFxuICAgIChyb3dJbmRleDogbnVtYmVyKSA9PiB7XG4gICAgICByZW1vdmVGaWVsZFJvdyh7IHBhdGgsIHJvd0luZGV4IH0pXG4gICAgICBzZXRNb2RpZmllZCh0cnVlKVxuICAgIH0sXG4gICAgW3JlbW92ZUZpZWxkUm93LCBwYXRoLCBzZXRNb2RpZmllZF0sXG4gIClcblxuICBjb25zdCBtb3ZlUm93ID0gdXNlQ2FsbGJhY2soXG4gICAgKG1vdmVGcm9tSW5kZXg6IG51bWJlciwgbW92ZVRvSW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgZGlzcGF0Y2hGaWVsZHMoeyBtb3ZlRnJvbUluZGV4LCBtb3ZlVG9JbmRleCwgcGF0aCwgdHlwZTogJ01PVkVfUk9XJyB9KVxuICAgICAgc2V0TW9kaWZpZWQodHJ1ZSlcbiAgICB9LFxuICAgIFtkaXNwYXRjaEZpZWxkcywgcGF0aCwgc2V0TW9kaWZpZWRdLFxuICApXG5cbiAgY29uc3QgdG9nZ2xlQ29sbGFwc2VBbGwgPSB1c2VDYWxsYmFjayhcbiAgICAoY29sbGFwc2VkOiBib29sZWFuKSA9PiB7XG4gICAgICBkaXNwYXRjaEZpZWxkcyh7IGNvbGxhcHNlZCwgcGF0aCwgc2V0RG9jRmllbGRQcmVmZXJlbmNlcywgdHlwZTogJ1NFVF9BTExfUk9XU19DT0xMQVBTRUQnIH0pXG4gICAgfSxcbiAgICBbZGlzcGF0Y2hGaWVsZHMsIHBhdGgsIHNldERvY0ZpZWxkUHJlZmVyZW5jZXNdLFxuICApXG5cbiAgY29uc3Qgc2V0Q29sbGFwc2UgPSB1c2VDYWxsYmFjayhcbiAgICAocm93SUQ6IHN0cmluZywgY29sbGFwc2VkOiBib29sZWFuKSA9PiB7XG4gICAgICBkaXNwYXRjaEZpZWxkcyh7IGNvbGxhcHNlZCwgcGF0aCwgcm93SUQsIHNldERvY0ZpZWxkUHJlZmVyZW5jZXMsIHR5cGU6ICdTRVRfUk9XX0NPTExBUFNFRCcgfSlcbiAgICB9LFxuICAgIFtkaXNwYXRjaEZpZWxkcywgcGF0aCwgc2V0RG9jRmllbGRQcmVmZXJlbmNlc10sXG4gIClcblxuICBjb25zdCBoYXNNYXhSb3dzID0gbWF4Um93cyAmJiByb3dzLmxlbmd0aCA+PSBtYXhSb3dzXG5cbiAgY29uc3QgZmllbGRFcnJvckNvdW50ID1cbiAgICByb3dzLnJlZHVjZSgodG90YWwsIHJvdykgPT4gdG90YWwgKyAocm93Py5jaGlsZEVycm9yUGF0aHM/LnNpemUgfHwgMCksIDApICsgKHZhbGlkID8gMCA6IDEpXG5cbiAgY29uc3QgZmllbGRIYXNFcnJvcnMgPSBzdWJtaXR0ZWQgJiYgZmllbGRFcnJvckNvdW50ID4gMFxuXG4gIGNvbnN0IHNob3dSZXF1aXJlZCA9IHJlYWRPbmx5ICYmIHJvd3MubGVuZ3RoID09PSAwXG4gIGNvbnN0IHNob3dNaW5Sb3dzID0gcm93cy5sZW5ndGggPCBtaW5Sb3dzIHx8IChyZXF1aXJlZCAmJiByb3dzLmxlbmd0aCA9PT0gMClcblxuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIGNsYXNzTmFtZT17W1xuICAgICAgICBmaWVsZEJhc2VDbGFzcyxcbiAgICAgICAgYmFzZUNsYXNzLFxuICAgICAgICBjbGFzc05hbWUsXG4gICAgICAgIGZpZWxkSGFzRXJyb3JzID8gYCR7YmFzZUNsYXNzfS0taGFzLWVycm9yYCA6IGAke2Jhc2VDbGFzc30tLWhhcy1uby1lcnJvcmAsXG4gICAgICBdXG4gICAgICAgIC5maWx0ZXIoQm9vbGVhbilcbiAgICAgICAgLmpvaW4oJyAnKX1cbiAgICAgIGlkPXtgZmllbGQtJHtwYXRoLnJlcGxhY2UoL1xcLi9nLCAnX18nKX1gfVxuICAgID5cbiAgICAgIHtzaG93RXJyb3IgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YCR7YmFzZUNsYXNzfV9fZXJyb3Itd3JhcGB9PlxuICAgICAgICAgIDxFcnJvciBtZXNzYWdlPXtlcnJvck1lc3NhZ2V9IHNob3dFcnJvcj17c2hvd0Vycm9yfSAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgICA8aGVhZGVyIGNsYXNzTmFtZT17YCR7YmFzZUNsYXNzfV9faGVhZGVyYH0+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtiYXNlQ2xhc3N9X19oZWFkZXItd3JhcGB9PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtiYXNlQ2xhc3N9X19oZWFkZXItY29udGVudGB9PlxuICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT17YCR7YmFzZUNsYXNzfV9fdGl0bGVgfT57Z2V0VHJhbnNsYXRpb24obGFiZWwgfHwgbmFtZSwgaTE4bil9PC9oMz5cbiAgICAgICAgICAgIHtmaWVsZEhhc0Vycm9ycyAmJiBmaWVsZEVycm9yQ291bnQgPiAwICYmIChcbiAgICAgICAgICAgICAgPEVycm9yUGlsbCBjb3VudD17ZmllbGRFcnJvckNvdW50fSB3aXRoTWVzc2FnZSAvPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB7cm93cy5sZW5ndGggPiAwICYmIChcbiAgICAgICAgICAgIDx1bCBjbGFzc05hbWU9e2Ake2Jhc2VDbGFzc31fX2hlYWRlci1hY3Rpb25zYH0+XG4gICAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake2Jhc2VDbGFzc31fX2hlYWRlci1hY3Rpb25gfVxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gdG9nZ2xlQ29sbGFwc2VBbGwodHJ1ZSl9XG4gICAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICB7dCgnY29sbGFwc2VBbGwnKX1cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgPGxpPlxuICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7YmFzZUNsYXNzfV9faGVhZGVyLWFjdGlvbmB9XG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB0b2dnbGVDb2xsYXBzZUFsbChmYWxzZSl9XG4gICAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICB7dCgnc2hvd0FsbCcpfVxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPEZpZWxkRGVzY3JpcHRpb25cbiAgICAgICAgICBjbGFzc05hbWU9e2BmaWVsZC1kZXNjcmlwdGlvbi0ke3BhdGgucmVwbGFjZSgvXFwuL2csICdfXycpfWB9XG4gICAgICAgICAgZGVzY3JpcHRpb249e2Rlc2NyaXB0aW9ufVxuICAgICAgICAgIHZhbHVlPXt2YWx1ZX1cbiAgICAgICAgLz5cbiAgICAgIDwvaGVhZGVyPlxuXG4gICAgICA8TnVsbGlmeUxvY2FsZUZpZWxkIGZpZWxkVmFsdWU9e3ZhbHVlfSBsb2NhbGl6ZWQ9e2xvY2FsaXplZH0gcGF0aD17cGF0aH0gLz5cbiAgICAgIHsocm93cy5sZW5ndGggPiAwIHx8ICghdmFsaWQgJiYgKHNob3dSZXF1aXJlZCB8fCBzaG93TWluUm93cykpKSAmJiAoXG4gICAgICAgIDxEcmFnZ2FibGVTb3J0YWJsZVxuICAgICAgICAgIGNsYXNzTmFtZT17YCR7YmFzZUNsYXNzfV9fZHJhZ2dhYmxlLXJvd3NgfVxuICAgICAgICAgIGlkcz17cm93cy5tYXAoKHJvdykgPT4gcm93LmlkKX1cbiAgICAgICAgICBvbkRyYWdFbmQ9eyh7IG1vdmVGcm9tSW5kZXgsIG1vdmVUb0luZGV4IH0pID0+IG1vdmVSb3cobW92ZUZyb21JbmRleCwgbW92ZVRvSW5kZXgpfVxuICAgICAgICA+XG4gICAgICAgICAge3Jvd3MubWFwKChyb3csIGkpID0+IChcbiAgICAgICAgICAgIDxEcmFnZ2FibGVTb3J0YWJsZUl0ZW0gZGlzYWJsZWQ9e3JlYWRPbmx5fSBpZD17cm93LmlkfSBrZXk9e3Jvdy5pZH0+XG4gICAgICAgICAgICAgIHsoZHJhZ2dhYmxlU29ydGFibGVJdGVtUHJvcHMpID0+IChcbiAgICAgICAgICAgICAgICA8QXJyYXlSb3dcbiAgICAgICAgICAgICAgICAgIHsuLi5kcmFnZ2FibGVTb3J0YWJsZUl0ZW1Qcm9wc31cbiAgICAgICAgICAgICAgICAgIEN1c3RvbVJvd0xhYmVsPXtDdXN0b21Sb3dMYWJlbH1cbiAgICAgICAgICAgICAgICAgIGFkZFJvdz17YWRkUm93fVxuICAgICAgICAgICAgICAgICAgZHVwbGljYXRlUm93PXtkdXBsaWNhdGVSb3d9XG4gICAgICAgICAgICAgICAgICBmaWVsZFR5cGVzPXtmaWVsZFR5cGVzfVxuICAgICAgICAgICAgICAgICAgZmllbGRzPXtmaWVsZHN9XG4gICAgICAgICAgICAgICAgICBmb3JjZVJlbmRlcj17Zm9yY2VSZW5kZXJ9XG4gICAgICAgICAgICAgICAgICBoYXNNYXhSb3dzPXtoYXNNYXhSb3dzfVxuICAgICAgICAgICAgICAgICAgaW5kZXhQYXRoPXtpbmRleFBhdGh9XG4gICAgICAgICAgICAgICAgICBsYWJlbHM9e2xhYmVsc31cbiAgICAgICAgICAgICAgICAgIG1vdmVSb3c9e21vdmVSb3d9XG4gICAgICAgICAgICAgICAgICBwYXRoPXtwYXRofVxuICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbnM9e3Blcm1pc3Npb25zfVxuICAgICAgICAgICAgICAgICAgcmVhZE9ubHk9e3JlYWRPbmx5fVxuICAgICAgICAgICAgICAgICAgcmVtb3ZlUm93PXtyZW1vdmVSb3d9XG4gICAgICAgICAgICAgICAgICByb3c9e3Jvd31cbiAgICAgICAgICAgICAgICAgIHJvd0NvdW50PXtyb3dzLmxlbmd0aH1cbiAgICAgICAgICAgICAgICAgIHJvd0luZGV4PXtpfVxuICAgICAgICAgICAgICAgICAgc2V0Q29sbGFwc2U9e3NldENvbGxhcHNlfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L0RyYWdnYWJsZVNvcnRhYmxlSXRlbT5cbiAgICAgICAgICApKX1cbiAgICAgICAgICB7IXZhbGlkICYmIChcbiAgICAgICAgICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgICAge3Nob3dSZXF1aXJlZCAmJiAoXG4gICAgICAgICAgICAgICAgPEJhbm5lcj5cbiAgICAgICAgICAgICAgICAgIHt0KCd2YWxpZGF0aW9uOmZpZWxkSGFzTm8nLCB7IGxhYmVsOiBnZXRUcmFuc2xhdGlvbihsYWJlbHMucGx1cmFsLCBpMThuKSB9KX1cbiAgICAgICAgICAgICAgICA8L0Jhbm5lcj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAge3Nob3dNaW5Sb3dzICYmIChcbiAgICAgICAgICAgICAgICA8QmFubmVyIHR5cGU9XCJlcnJvclwiPlxuICAgICAgICAgICAgICAgICAge3QoJ3ZhbGlkYXRpb246cmVxdWlyZXNBdExlYXN0Jywge1xuICAgICAgICAgICAgICAgICAgICBjb3VudDogbWluUm93cyxcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6XG4gICAgICAgICAgICAgICAgICAgICAgZ2V0VHJhbnNsYXRpb24obWluUm93cyA/IGxhYmVscy5wbHVyYWwgOiBsYWJlbHMuc2luZ3VsYXIsIGkxOG4pIHx8XG4gICAgICAgICAgICAgICAgICAgICAgdChtaW5Sb3dzID4gMSA/ICdnZW5lcmFsOnJvdycgOiAnZ2VuZXJhbDpyb3dzJyksXG4gICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICA8L0Jhbm5lcj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9EcmFnZ2FibGVTb3J0YWJsZT5cbiAgICAgICl9XG4gICAgICB7IXJlYWRPbmx5ICYmICFoYXNNYXhSb3dzICYmIChcbiAgICAgICAgPEJ1dHRvblxuICAgICAgICAgIGJ1dHRvblN0eWxlPVwiaWNvbi1sYWJlbFwiXG4gICAgICAgICAgY2xhc3NOYW1lPXtgJHtiYXNlQ2xhc3N9X19hZGQtcm93YH1cbiAgICAgICAgICBpY29uPVwicGx1c1wiXG4gICAgICAgICAgaWNvblBvc2l0aW9uPVwibGVmdFwiXG4gICAgICAgICAgaWNvblN0eWxlPVwid2l0aC1ib3JkZXJcIlxuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGFkZFJvdyh2YWx1ZSB8fCAwKX1cbiAgICAgICAgPlxuICAgICAgICAgIHt0KCdhZGRMYWJlbCcsIHsgbGFiZWw6IGdldFRyYW5zbGF0aW9uKGxhYmVscy5zaW5ndWxhciwgaTE4bikgfSl9XG4gICAgICAgIDwvQnV0dG9uPlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG5leHBvcnQgZGVmYXVsdCB3aXRoQ29uZGl0aW9uKEFycmF5RmllbGRUeXBlKVxuIl0sIm5hbWVzIjpbImJhc2VDbGFzcyIsIkFycmF5RmllbGRUeXBlIiwicHJvcHMiLCJuYW1lIiwiYWRtaW4iLCJjbGFzc05hbWUiLCJjb21wb25lbnRzIiwiY29uZGl0aW9uIiwiZGVzY3JpcHRpb24iLCJyZWFkT25seSIsImZpZWxkVHlwZXMiLCJmaWVsZHMiLCJmb3JjZVJlbmRlciIsImluZGV4UGF0aCIsImxvY2FsaXplZCIsIm1heFJvd3MiLCJtaW5Sb3dzIiwicGF0aCIsInBhdGhGcm9tUHJvcHMiLCJwZXJtaXNzaW9ucyIsInJlcXVpcmVkIiwidmFsaWRhdGUiLCJhcnJheSIsImxhYmVsIiwibGFiZWxzIiwic2luZ3VsYXIiLCJDdXN0b21Sb3dMYWJlbCIsIlJvd0xhYmVsIiwidW5kZWZpbmVkIiwic2V0RG9jRmllbGRQcmVmZXJlbmNlcyIsInVzZURvY3VtZW50SW5mbyIsImFkZEZpZWxkUm93IiwiZGlzcGF0Y2hGaWVsZHMiLCJyZW1vdmVGaWVsZFJvdyIsInNldE1vZGlmaWVkIiwidXNlRm9ybSIsInN1Ym1pdHRlZCIsInVzZUZvcm1TdWJtaXR0ZWQiLCJjb2RlIiwibG9jYWxlIiwidXNlTG9jYWxlIiwiaTE4biIsInQiLCJ1c2VUcmFuc2xhdGlvbiIsImxvY2FsaXphdGlvbiIsInVzZUNvbmZpZyIsImVkaXRpbmdEZWZhdWx0TG9jYWxlIiwiZmFsbGJhY2siLCJkZWZhdWx0TG9jYWxlIiwiZ2V0TGFiZWxzIiwicCIsInBsdXJhbCIsIm1lbW9pemVkVmFsaWRhdGUiLCJ1c2VDYWxsYmFjayIsInZhbHVlIiwib3B0aW9ucyIsImVycm9yTWVzc2FnZSIsInJvd3MiLCJzaG93RXJyb3IiLCJ2YWxpZCIsInVzZUZpZWxkIiwiaGFzUm93cyIsImFkZFJvdyIsInJvd0luZGV4Iiwic2V0VGltZW91dCIsInNjcm9sbFRvSUQiLCJkdXBsaWNhdGVSb3ciLCJ0eXBlIiwicmVtb3ZlUm93IiwibW92ZVJvdyIsIm1vdmVGcm9tSW5kZXgiLCJtb3ZlVG9JbmRleCIsInRvZ2dsZUNvbGxhcHNlQWxsIiwiY29sbGFwc2VkIiwic2V0Q29sbGFwc2UiLCJyb3dJRCIsImhhc01heFJvd3MiLCJsZW5ndGgiLCJmaWVsZEVycm9yQ291bnQiLCJyZWR1Y2UiLCJ0b3RhbCIsInJvdyIsImNoaWxkRXJyb3JQYXRocyIsInNpemUiLCJmaWVsZEhhc0Vycm9ycyIsInNob3dSZXF1aXJlZCIsInNob3dNaW5Sb3dzIiwiZGl2IiwiZmllbGRCYXNlQ2xhc3MiLCJmaWx0ZXIiLCJCb29sZWFuIiwiam9pbiIsImlkIiwicmVwbGFjZSIsIkVycm9yIiwibWVzc2FnZSIsImhlYWRlciIsImgzIiwiZ2V0VHJhbnNsYXRpb24iLCJFcnJvclBpbGwiLCJjb3VudCIsIndpdGhNZXNzYWdlIiwidWwiLCJsaSIsImJ1dHRvbiIsIm9uQ2xpY2siLCJGaWVsZERlc2NyaXB0aW9uIiwiTnVsbGlmeUxvY2FsZUZpZWxkIiwiZmllbGRWYWx1ZSIsIkRyYWdnYWJsZVNvcnRhYmxlIiwiaWRzIiwibWFwIiwib25EcmFnRW5kIiwiaSIsIkRyYWdnYWJsZVNvcnRhYmxlSXRlbSIsImRpc2FibGVkIiwia2V5IiwiZHJhZ2dhYmxlU29ydGFibGVJdGVtUHJvcHMiLCJBcnJheVJvdyIsInJvd0NvdW50IiwiUmVhY3QiLCJGcmFnbWVudCIsIkJhbm5lciIsIkJ1dHRvbiIsImJ1dHRvblN0eWxlIiwiaWNvbiIsImljb25Qb3NpdGlvbiIsImljb25TdHlsZSIsIndpdGhDb25kaXRpb24iXSwibWFwcGluZ3MiOiI7Ozs7K0JBbVNBOzs7ZUFBQTs7OytEQW5TbUM7OEJBQ0o7NkJBSVQ7Z0NBQ1M7NEJBQ0o7K0RBQ1I7K0RBQ0E7MEVBQ1c7OEVBQ0k7MkJBQ1I7d0JBQ0E7OEJBQ007d0JBQ047OERBQ1I7eUVBQ1c7eUJBQ2E7OEJBQ1A7aUVBQ2Q7c0VBQ0s7d0JBQ0s7MEJBQ047UUFDbEI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVQLE1BQU1BLFlBQVk7QUFFbEIsTUFBTUMsaUJBQWtDLENBQUNDO0lBQ3ZDLE1BQU0sRUFDSkMsSUFBSSxFQUNKQyxPQUFPLEVBQUVDLFNBQVMsRUFBRUMsVUFBVSxFQUFFQyxTQUFTLEVBQUVDLFdBQVcsRUFBRUMsUUFBUSxFQUFFLEVBQ2xFQyxVQUFVLEVBQ1ZDLE1BQU0sRUFDTkMsY0FBYyxLQUFLLEVBQ25CQyxTQUFTLEVBQ1RDLFNBQVMsRUFDVEMsT0FBTyxFQUNQQyxPQUFPLEVBQ1BDLE1BQU1DLGFBQWEsRUFDbkJDLFdBQVcsRUFDWEMsUUFBUSxFQUNSQyxXQUFXQyxrQkFBSyxFQUNqQixHQUFHcEI7SUFFSixNQUFNZSxPQUFPQyxpQkFBaUJmO0lBRTlCLDBEQUEwRDtJQUMxRCxNQUFNb0IsUUFBUXJCLE9BQU9xQixTQUFTckIsT0FBT3NCLFFBQVFDO0lBRTdDLE1BQU1DLGlCQUFpQnBCLFlBQVlxQixZQUFZQztJQUUvQyxNQUFNLEVBQUVDLHNCQUFzQixFQUFFLEdBQUdDLElBQUFBLDZCQUFlO0lBQ2xELE1BQU0sRUFBRUMsV0FBVyxFQUFFQyxjQUFjLEVBQUVDLGNBQWMsRUFBRUMsV0FBVyxFQUFFLEdBQUdDLElBQUFBLGdCQUFPO0lBQzVFLE1BQU1DLFlBQVlDLElBQUFBLHlCQUFnQjtJQUNsQyxNQUFNLEVBQUVDLE1BQU1DLE1BQU0sRUFBRSxHQUFHQyxJQUFBQSxpQkFBUztJQUNsQyxNQUFNLEVBQUVDLElBQUksRUFBRUMsQ0FBQyxFQUFFLEdBQUdDLElBQUFBLDRCQUFjLEVBQUM7SUFDbkMsTUFBTSxFQUFFQyxZQUFZLEVBQUUsR0FBR0MsSUFBQUEsaUJBQVM7SUFFbEMsTUFBTUMsdUJBQXVCLEFBQUMsQ0FBQTtRQUM1QixJQUFJRixnQkFBZ0JBLGFBQWFHLFFBQVEsRUFBRTtZQUN6QyxNQUFNQyxnQkFBZ0JKLGFBQWFJLGFBQWEsSUFBSTtZQUNwRCxPQUFPVCxXQUFXUztRQUNwQjtRQUVBLE9BQU87SUFDVCxDQUFBO0lBRUEsd0RBQXdEO0lBQ3hELE1BQU1DLFlBQVksQ0FBQ0M7UUFDakIsSUFBSUEsR0FBRzFCLFFBQVEsT0FBTzBCLEVBQUUxQixNQUFNO1FBQzlCLElBQUkwQixHQUFHM0IsT0FBTyxPQUFPO1lBQUU0QixRQUFRdkI7WUFBV0gsVUFBVXlCLEVBQUUzQixLQUFLO1FBQUM7UUFDNUQsT0FBTztZQUFFNEIsUUFBUVQsRUFBRTtZQUFTakIsVUFBVWlCLEVBQUU7UUFBTztJQUNqRDtJQUVBLE1BQU1sQixTQUFTeUIsVUFBVS9DO0lBRXpCLE1BQU1rRCxtQkFBbUJDLElBQUFBLGtCQUFXLEVBQ2xDLENBQUNDLE9BQU9DO1FBQ04sa0NBQWtDO1FBQ2xDLElBQUksQ0FBQ1Qsd0JBQXdCUSxVQUFVLE1BQU07WUFDM0MsT0FBTztRQUNUO1FBQ0EsT0FBT2pDLFNBQVNpQyxPQUFPO1lBQUUsR0FBR0MsT0FBTztZQUFFeEM7WUFBU0M7WUFBU0k7UUFBUztJQUNsRSxHQUNBO1FBQUNMO1FBQVNDO1FBQVNJO1FBQVVDO1FBQVV5QjtLQUFxQjtJQUc5RCxNQUFNLEVBQ0pVLFlBQVksRUFDWkMsT0FBTyxFQUFFLEVBQ1RDLFNBQVMsRUFDVEMsS0FBSyxFQUNMTCxLQUFLLEVBQ04sR0FBR00sSUFBQUEsaUJBQVEsRUFBUztRQUNuQnJEO1FBQ0FzRCxTQUFTO1FBQ1Q1QztRQUNBSSxVQUFVK0I7SUFDWjtJQUVBLE1BQU1VLFNBQVNULElBQUFBLGtCQUFXLEVBQ3hCLE9BQU9VO1FBQ0wsTUFBTWhDLFlBQVk7WUFBRWQ7WUFBTThDO1FBQVM7UUFDbkM3QixZQUFZO1FBRVo4QixXQUFXO1lBQ1RDLElBQUFBLHNCQUFVLEVBQUMsQ0FBQyxFQUFFaEQsS0FBSyxLQUFLLEVBQUU4QyxXQUFXLEVBQUUsQ0FBQztRQUMxQyxHQUFHO0lBQ0wsR0FDQTtRQUFDaEM7UUFBYWQ7UUFBTWlCO0tBQVk7SUFHbEMsTUFBTWdDLGVBQWViLElBQUFBLGtCQUFXLEVBQzlCLENBQUNVO1FBQ0MvQixlQUFlO1lBQUVmO1lBQU04QztZQUFVSSxNQUFNO1FBQWdCO1FBQ3ZEakMsWUFBWTtRQUVaOEIsV0FBVztZQUNUQyxJQUFBQSxzQkFBVSxFQUFDLENBQUMsRUFBRWhELEtBQUssS0FBSyxFQUFFOEMsU0FBUyxDQUFDO1FBQ3RDLEdBQUc7SUFDTCxHQUNBO1FBQUMvQjtRQUFnQmY7UUFBTWlCO0tBQVk7SUFHckMsTUFBTWtDLFlBQVlmLElBQUFBLGtCQUFXLEVBQzNCLENBQUNVO1FBQ0M5QixlQUFlO1lBQUVoQjtZQUFNOEM7UUFBUztRQUNoQzdCLFlBQVk7SUFDZCxHQUNBO1FBQUNEO1FBQWdCaEI7UUFBTWlCO0tBQVk7SUFHckMsTUFBTW1DLFVBQVVoQixJQUFBQSxrQkFBVyxFQUN6QixDQUFDaUIsZUFBdUJDO1FBQ3RCdkMsZUFBZTtZQUFFc0M7WUFBZUM7WUFBYXREO1lBQU1rRCxNQUFNO1FBQVc7UUFDcEVqQyxZQUFZO0lBQ2QsR0FDQTtRQUFDRjtRQUFnQmY7UUFBTWlCO0tBQVk7SUFHckMsTUFBTXNDLG9CQUFvQm5CLElBQUFBLGtCQUFXLEVBQ25DLENBQUNvQjtRQUNDekMsZUFBZTtZQUFFeUM7WUFBV3hEO1lBQU1ZO1lBQXdCc0MsTUFBTTtRQUF5QjtJQUMzRixHQUNBO1FBQUNuQztRQUFnQmY7UUFBTVk7S0FBdUI7SUFHaEQsTUFBTTZDLGNBQWNyQixJQUFBQSxrQkFBVyxFQUM3QixDQUFDc0IsT0FBZUY7UUFDZHpDLGVBQWU7WUFBRXlDO1lBQVd4RDtZQUFNMEQ7WUFBTzlDO1lBQXdCc0MsTUFBTTtRQUFvQjtJQUM3RixHQUNBO1FBQUNuQztRQUFnQmY7UUFBTVk7S0FBdUI7SUFHaEQsTUFBTStDLGFBQWE3RCxXQUFXMEMsS0FBS29CLE1BQU0sSUFBSTlEO0lBRTdDLE1BQU0rRCxrQkFDSnJCLEtBQUtzQixNQUFNLENBQUMsQ0FBQ0MsT0FBT0MsTUFBUUQsUUFBU0MsQ0FBQUEsS0FBS0MsaUJBQWlCQyxRQUFRLENBQUEsR0FBSSxLQUFNeEIsQ0FBQUEsUUFBUSxJQUFJLENBQUE7SUFFM0YsTUFBTXlCLGlCQUFpQmhELGFBQWEwQyxrQkFBa0I7SUFFdEQsTUFBTU8sZUFBZTVFLFlBQVlnRCxLQUFLb0IsTUFBTSxLQUFLO0lBQ2pELE1BQU1TLGNBQWM3QixLQUFLb0IsTUFBTSxHQUFHN0QsV0FBWUksWUFBWXFDLEtBQUtvQixNQUFNLEtBQUs7SUFFMUUscUJBQ0UsNkJBQUNVO1FBQ0NsRixXQUFXO1lBQ1RtRixzQkFBYztZQUNkeEY7WUFDQUs7WUFDQStFLGlCQUFpQixDQUFDLEVBQUVwRixVQUFVLFdBQVcsQ0FBQyxHQUFHLENBQUMsRUFBRUEsVUFBVSxjQUFjLENBQUM7U0FDMUUsQ0FDRXlGLE1BQU0sQ0FBQ0MsU0FDUEMsSUFBSSxDQUFDO1FBQ1JDLElBQUksQ0FBQyxNQUFNLEVBQUUzRSxLQUFLNEUsT0FBTyxDQUFDLE9BQU8sTUFBTSxDQUFDO09BRXZDbkMsMkJBQ0MsNkJBQUM2QjtRQUFJbEYsV0FBVyxDQUFDLEVBQUVMLFVBQVUsWUFBWSxDQUFDO3FCQUN4Qyw2QkFBQzhGLGNBQUs7UUFBQ0MsU0FBU3ZDO1FBQWNFLFdBQVdBO3VCQUc3Qyw2QkFBQ3NDO1FBQU8zRixXQUFXLENBQUMsRUFBRUwsVUFBVSxRQUFRLENBQUM7cUJBQ3ZDLDZCQUFDdUY7UUFBSWxGLFdBQVcsQ0FBQyxFQUFFTCxVQUFVLGFBQWEsQ0FBQztxQkFDekMsNkJBQUN1RjtRQUFJbEYsV0FBVyxDQUFDLEVBQUVMLFVBQVUsZ0JBQWdCLENBQUM7cUJBQzVDLDZCQUFDaUc7UUFBRzVGLFdBQVcsQ0FBQyxFQUFFTCxVQUFVLE9BQU8sQ0FBQztPQUFHa0csSUFBQUEsOEJBQWMsRUFBQzNFLFNBQVNwQixNQUFNc0MsUUFDcEUyQyxrQkFBa0JOLGtCQUFrQixtQkFDbkMsNkJBQUNxQixvQkFBUztRQUFDQyxPQUFPdEI7UUFBaUJ1QixhQUFBQTtTQUd0QzVDLEtBQUtvQixNQUFNLEdBQUcsbUJBQ2IsNkJBQUN5QjtRQUFHakcsV0FBVyxDQUFDLEVBQUVMLFVBQVUsZ0JBQWdCLENBQUM7cUJBQzNDLDZCQUFDdUcsMEJBQ0MsNkJBQUNDO1FBQ0NuRyxXQUFXLENBQUMsRUFBRUwsVUFBVSxlQUFlLENBQUM7UUFDeEN5RyxTQUFTLElBQU1qQyxrQkFBa0I7UUFDakNMLE1BQUs7T0FFSnpCLEVBQUUsZ0NBR1AsNkJBQUM2RCwwQkFDQyw2QkFBQ0M7UUFDQ25HLFdBQVcsQ0FBQyxFQUFFTCxVQUFVLGVBQWUsQ0FBQztRQUN4Q3lHLFNBQVMsSUFBTWpDLGtCQUFrQjtRQUNqQ0wsTUFBSztPQUVKekIsRUFBRSw4QkFNYiw2QkFBQ2dFLHlCQUFnQjtRQUNmckcsV0FBVyxDQUFDLGtCQUFrQixFQUFFWSxLQUFLNEUsT0FBTyxDQUFDLE9BQU8sTUFBTSxDQUFDO1FBQzNEckYsYUFBYUE7UUFDYjhDLE9BQU9BO3VCQUlYLDZCQUFDcUQsZ0NBQWtCO1FBQUNDLFlBQVl0RDtRQUFPeEMsV0FBV0E7UUFBV0csTUFBTUE7UUFDbEUsQUFBQ3dDLENBQUFBLEtBQUtvQixNQUFNLEdBQUcsS0FBTSxDQUFDbEIsU0FBVTBCLENBQUFBLGdCQUFnQkMsV0FBVSxDQUFFLG1CQUMzRCw2QkFBQ3VCLDBCQUFpQjtRQUNoQnhHLFdBQVcsQ0FBQyxFQUFFTCxVQUFVLGdCQUFnQixDQUFDO1FBQ3pDOEcsS0FBS3JELEtBQUtzRCxHQUFHLENBQUMsQ0FBQzlCLE1BQVFBLElBQUlXLEVBQUU7UUFDN0JvQixXQUFXLENBQUMsRUFBRTFDLGFBQWEsRUFBRUMsV0FBVyxFQUFFLEdBQUtGLFFBQVFDLGVBQWVDO09BRXJFZCxLQUFLc0QsR0FBRyxDQUFDLENBQUM5QixLQUFLZ0Msa0JBQ2QsNkJBQUNDLDhCQUFxQjtZQUFDQyxVQUFVMUc7WUFBVW1GLElBQUlYLElBQUlXLEVBQUU7WUFBRXdCLEtBQUtuQyxJQUFJVyxFQUFFO1dBQy9ELENBQUN5QiwyQ0FDQSw2QkFBQ0Msa0JBQVE7Z0JBQ04sR0FBR0QsMEJBQTBCO2dCQUM5QjNGLGdCQUFnQkE7Z0JBQ2hCb0MsUUFBUUE7Z0JBQ1JJLGNBQWNBO2dCQUNkeEQsWUFBWUE7Z0JBQ1pDLFFBQVFBO2dCQUNSQyxhQUFhQTtnQkFDYmdFLFlBQVlBO2dCQUNaL0QsV0FBV0E7Z0JBQ1hXLFFBQVFBO2dCQUNSNkMsU0FBU0E7Z0JBQ1RwRCxNQUFNQTtnQkFDTkUsYUFBYUE7Z0JBQ2JWLFVBQVVBO2dCQUNWMkQsV0FBV0E7Z0JBQ1hhLEtBQUtBO2dCQUNMc0MsVUFBVTlELEtBQUtvQixNQUFNO2dCQUNyQmQsVUFBVWtEO2dCQUNWdkMsYUFBYUE7a0JBS3BCLENBQUNmLHVCQUNBLDZCQUFDNkQsY0FBSyxDQUFDQyxRQUFRLFFBQ1pwQyw4QkFDQyw2QkFBQ3FDLGVBQU0sUUFDSmhGLEVBQUUseUJBQXlCO1FBQUVuQixPQUFPMkUsSUFBQUEsOEJBQWMsRUFBQzFFLE9BQU8yQixNQUFNLEVBQUVWO0lBQU0sS0FHNUU2Qyw2QkFDQyw2QkFBQ29DLGVBQU07UUFBQ3ZELE1BQUs7T0FDVnpCLEVBQUUsOEJBQThCO1FBQy9CMEQsT0FBT3BGO1FBQ1BPLE9BQ0UyRSxJQUFBQSw4QkFBYyxFQUFDbEYsVUFBVVEsT0FBTzJCLE1BQU0sR0FBRzNCLE9BQU9DLFFBQVEsRUFBRWdCLFNBQzFEQyxFQUFFMUIsVUFBVSxJQUFJLGdCQUFnQjtJQUNwQyxPQU9YLENBQUNQLFlBQVksQ0FBQ21FLDRCQUNiLDZCQUFDK0MsZUFBTTtRQUNMQyxhQUFZO1FBQ1p2SCxXQUFXLENBQUMsRUFBRUwsVUFBVSxTQUFTLENBQUM7UUFDbEM2SCxNQUFLO1FBQ0xDLGNBQWE7UUFDYkMsV0FBVTtRQUNWdEIsU0FBUyxJQUFNM0MsT0FBT1IsU0FBUztPQUU5QlosRUFBRSxZQUFZO1FBQUVuQixPQUFPMkUsSUFBQUEsOEJBQWMsRUFBQzFFLE9BQU9DLFFBQVEsRUFBRWdCO0lBQU07QUFLeEU7TUFFQSxXQUFldUYsSUFBQUEsc0JBQWEsRUFBQy9IIn0=