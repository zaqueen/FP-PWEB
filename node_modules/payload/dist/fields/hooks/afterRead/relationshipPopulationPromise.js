"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return _default;
    }
});
const _types = require("../../config/types");
const populate = async ({ currentDepth, data, dataReference, depth, field, index, key, overrideAccess, req, showHiddenFields })=>{
    const dataToUpdate = dataReference;
    const relation = Array.isArray(field.relationTo) ? data.relationTo : field.relationTo;
    const relatedCollection = req.payload.collections[relation];
    if (relatedCollection) {
        let id = Array.isArray(field.relationTo) ? data.value : data;
        let relationshipValue;
        const shouldPopulate = depth && currentDepth <= depth;
        if (typeof id !== 'string' && typeof id !== 'number' && typeof id?.toString === 'function' && typeof id !== 'object') {
            id = id.toString();
        }
        if (shouldPopulate) {
            relationshipValue = await req.payloadDataLoader.load(JSON.stringify([
                req.transactionID,
                relatedCollection.config.slug,
                id,
                depth,
                currentDepth + 1,
                req.locale,
                req.fallbackLocale,
                overrideAccess,
                showHiddenFields
            ]));
        }
        if (!relationshipValue) {
            // ids are visible regardless of access controls
            relationshipValue = id;
        }
        if (typeof index === 'number' && typeof key === 'string') {
            if (Array.isArray(field.relationTo)) {
                dataToUpdate[field.name][key][index].value = relationshipValue;
            } else {
                dataToUpdate[field.name][key][index] = relationshipValue;
            }
        } else if (typeof index === 'number' || typeof key === 'string') {
            if (Array.isArray(field.relationTo)) {
                dataToUpdate[field.name][index ?? key].value = relationshipValue;
            } else {
                dataToUpdate[field.name][index ?? key] = relationshipValue;
            }
        } else if (Array.isArray(field.relationTo)) {
            dataToUpdate[field.name].value = relationshipValue;
        } else {
            dataToUpdate[field.name] = relationshipValue;
        }
    }
};
const relationshipPopulationPromise = async ({ currentDepth, depth, field, overrideAccess, req, showHiddenFields, siblingDoc })=>{
    const resultingDoc = siblingDoc;
    const populateDepth = (0, _types.fieldHasMaxDepth)(field) && field.maxDepth < depth ? field.maxDepth : depth;
    const rowPromises = [];
    if ((0, _types.fieldSupportsMany)(field) && field.hasMany) {
        if (req.locale === 'all' && typeof siblingDoc[field.name] === 'object' && siblingDoc[field.name] !== null) {
            Object.keys(siblingDoc[field.name]).forEach((key)=>{
                if (Array.isArray(siblingDoc[field.name][key])) {
                    siblingDoc[field.name][key].forEach((relatedDoc, index)=>{
                        const rowPromise = async ()=>{
                            await populate({
                                currentDepth,
                                data: siblingDoc[field.name][key][index],
                                dataReference: resultingDoc,
                                depth: populateDepth,
                                field,
                                index,
                                key,
                                overrideAccess,
                                req,
                                showHiddenFields
                            });
                        };
                        rowPromises.push(rowPromise());
                    });
                }
            });
        } else if (Array.isArray(siblingDoc[field.name])) {
            siblingDoc[field.name].forEach((relatedDoc, index)=>{
                const rowPromise = async ()=>{
                    if (relatedDoc) {
                        await populate({
                            currentDepth,
                            data: relatedDoc,
                            dataReference: resultingDoc,
                            depth: populateDepth,
                            field,
                            index,
                            overrideAccess,
                            req,
                            showHiddenFields
                        });
                    }
                };
                rowPromises.push(rowPromise());
            });
        }
    } else if (typeof siblingDoc[field.name] === 'object' && siblingDoc[field.name] !== null && req.locale === 'all') {
        Object.keys(siblingDoc[field.name]).forEach((key)=>{
            const rowPromise = async ()=>{
                await populate({
                    currentDepth,
                    data: siblingDoc[field.name][key],
                    dataReference: resultingDoc,
                    depth: populateDepth,
                    field,
                    key,
                    overrideAccess,
                    req,
                    showHiddenFields
                });
            };
            rowPromises.push(rowPromise());
        });
        await Promise.all(rowPromises);
    } else if (siblingDoc[field.name]) {
        await populate({
            currentDepth,
            data: siblingDoc[field.name],
            dataReference: resultingDoc,
            depth: populateDepth,
            field,
            overrideAccess,
            req,
            showHiddenFields
        });
    }
    await Promise.all(rowPromises);
};
const _default = relationshipPopulationPromise;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9maWVsZHMvaG9va3MvYWZ0ZXJSZWFkL3JlbGF0aW9uc2hpcFBvcHVsYXRpb25Qcm9taXNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgUGF5bG9hZFJlcXVlc3QgfSBmcm9tICcuLi8uLi8uLi9leHByZXNzL3R5cGVzJ1xuaW1wb3J0IHR5cGUgeyBSZWxhdGlvbnNoaXBGaWVsZCwgVXBsb2FkRmllbGQgfSBmcm9tICcuLi8uLi9jb25maWcvdHlwZXMnXG5cbmltcG9ydCB7IGZpZWxkSGFzTWF4RGVwdGgsIGZpZWxkU3VwcG9ydHNNYW55IH0gZnJvbSAnLi4vLi4vY29uZmlnL3R5cGVzJ1xuXG50eXBlIFBvcHVsYXRlQXJncyA9IHtcbiAgY3VycmVudERlcHRoOiBudW1iZXJcbiAgZGF0YTogUmVjb3JkPHN0cmluZywgdW5rbm93bj5cbiAgZGF0YVJlZmVyZW5jZTogUmVjb3JkPHN0cmluZywgYW55PlxuICBkZXB0aDogbnVtYmVyXG4gIGZpZWxkOiBSZWxhdGlvbnNoaXBGaWVsZCB8IFVwbG9hZEZpZWxkXG4gIGluZGV4PzogbnVtYmVyXG4gIGtleT86IHN0cmluZ1xuICBvdmVycmlkZUFjY2VzczogYm9vbGVhblxuICByZXE6IFBheWxvYWRSZXF1ZXN0XG4gIHNob3dIaWRkZW5GaWVsZHM6IGJvb2xlYW5cbn1cblxuY29uc3QgcG9wdWxhdGUgPSBhc3luYyAoe1xuICBjdXJyZW50RGVwdGgsXG4gIGRhdGEsXG4gIGRhdGFSZWZlcmVuY2UsXG4gIGRlcHRoLFxuICBmaWVsZCxcbiAgaW5kZXgsXG4gIGtleSxcbiAgb3ZlcnJpZGVBY2Nlc3MsXG4gIHJlcSxcbiAgc2hvd0hpZGRlbkZpZWxkcyxcbn06IFBvcHVsYXRlQXJncykgPT4ge1xuICBjb25zdCBkYXRhVG9VcGRhdGUgPSBkYXRhUmVmZXJlbmNlXG4gIGNvbnN0IHJlbGF0aW9uID0gQXJyYXkuaXNBcnJheShmaWVsZC5yZWxhdGlvblRvKSA/IChkYXRhLnJlbGF0aW9uVG8gYXMgc3RyaW5nKSA6IGZpZWxkLnJlbGF0aW9uVG9cbiAgY29uc3QgcmVsYXRlZENvbGxlY3Rpb24gPSByZXEucGF5bG9hZC5jb2xsZWN0aW9uc1tyZWxhdGlvbl1cblxuICBpZiAocmVsYXRlZENvbGxlY3Rpb24pIHtcbiAgICBsZXQgaWQgPSBBcnJheS5pc0FycmF5KGZpZWxkLnJlbGF0aW9uVG8pID8gZGF0YS52YWx1ZSA6IGRhdGFcbiAgICBsZXQgcmVsYXRpb25zaGlwVmFsdWVcbiAgICBjb25zdCBzaG91bGRQb3B1bGF0ZSA9IGRlcHRoICYmIGN1cnJlbnREZXB0aCA8PSBkZXB0aFxuXG4gICAgaWYgKFxuICAgICAgdHlwZW9mIGlkICE9PSAnc3RyaW5nJyAmJlxuICAgICAgdHlwZW9mIGlkICE9PSAnbnVtYmVyJyAmJlxuICAgICAgdHlwZW9mIGlkPy50b1N0cmluZyA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgdHlwZW9mIGlkICE9PSAnb2JqZWN0J1xuICAgICkge1xuICAgICAgaWQgPSBpZC50b1N0cmluZygpXG4gICAgfVxuXG4gICAgaWYgKHNob3VsZFBvcHVsYXRlKSB7XG4gICAgICByZWxhdGlvbnNoaXBWYWx1ZSA9IGF3YWl0IHJlcS5wYXlsb2FkRGF0YUxvYWRlci5sb2FkKFxuICAgICAgICBKU09OLnN0cmluZ2lmeShbXG4gICAgICAgICAgcmVxLnRyYW5zYWN0aW9uSUQsXG4gICAgICAgICAgcmVsYXRlZENvbGxlY3Rpb24uY29uZmlnLnNsdWcsXG4gICAgICAgICAgaWQsXG4gICAgICAgICAgZGVwdGgsXG4gICAgICAgICAgY3VycmVudERlcHRoICsgMSxcbiAgICAgICAgICByZXEubG9jYWxlLFxuICAgICAgICAgIHJlcS5mYWxsYmFja0xvY2FsZSxcbiAgICAgICAgICBvdmVycmlkZUFjY2VzcyxcbiAgICAgICAgICBzaG93SGlkZGVuRmllbGRzLFxuICAgICAgICBdKSxcbiAgICAgIClcbiAgICB9XG5cbiAgICBpZiAoIXJlbGF0aW9uc2hpcFZhbHVlKSB7XG4gICAgICAvLyBpZHMgYXJlIHZpc2libGUgcmVnYXJkbGVzcyBvZiBhY2Nlc3MgY29udHJvbHNcbiAgICAgIHJlbGF0aW9uc2hpcFZhbHVlID0gaWRcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGluZGV4ID09PSAnbnVtYmVyJyAmJiB0eXBlb2Yga2V5ID09PSAnc3RyaW5nJykge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZmllbGQucmVsYXRpb25UbykpIHtcbiAgICAgICAgZGF0YVRvVXBkYXRlW2ZpZWxkLm5hbWVdW2tleV1baW5kZXhdLnZhbHVlID0gcmVsYXRpb25zaGlwVmFsdWVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRhdGFUb1VwZGF0ZVtmaWVsZC5uYW1lXVtrZXldW2luZGV4XSA9IHJlbGF0aW9uc2hpcFZhbHVlXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgaW5kZXggPT09ICdudW1iZXInIHx8IHR5cGVvZiBrZXkgPT09ICdzdHJpbmcnKSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShmaWVsZC5yZWxhdGlvblRvKSkge1xuICAgICAgICBkYXRhVG9VcGRhdGVbZmllbGQubmFtZV1baW5kZXggPz8ga2V5XS52YWx1ZSA9IHJlbGF0aW9uc2hpcFZhbHVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkYXRhVG9VcGRhdGVbZmllbGQubmFtZV1baW5kZXggPz8ga2V5XSA9IHJlbGF0aW9uc2hpcFZhbHVlXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGZpZWxkLnJlbGF0aW9uVG8pKSB7XG4gICAgICBkYXRhVG9VcGRhdGVbZmllbGQubmFtZV0udmFsdWUgPSByZWxhdGlvbnNoaXBWYWx1ZVxuICAgIH0gZWxzZSB7XG4gICAgICBkYXRhVG9VcGRhdGVbZmllbGQubmFtZV0gPSByZWxhdGlvbnNoaXBWYWx1ZVxuICAgIH1cbiAgfVxufVxuXG50eXBlIFByb21pc2VBcmdzID0ge1xuICBjdXJyZW50RGVwdGg6IG51bWJlclxuICBkZXB0aDogbnVtYmVyXG4gIGZpZWxkOiBSZWxhdGlvbnNoaXBGaWVsZCB8IFVwbG9hZEZpZWxkXG4gIG92ZXJyaWRlQWNjZXNzOiBib29sZWFuXG4gIHJlcTogUGF5bG9hZFJlcXVlc3RcbiAgc2hvd0hpZGRlbkZpZWxkczogYm9vbGVhblxuICBzaWJsaW5nRG9jOiBSZWNvcmQ8c3RyaW5nLCBhbnk+XG59XG5cbmNvbnN0IHJlbGF0aW9uc2hpcFBvcHVsYXRpb25Qcm9taXNlID0gYXN5bmMgKHtcbiAgY3VycmVudERlcHRoLFxuICBkZXB0aCxcbiAgZmllbGQsXG4gIG92ZXJyaWRlQWNjZXNzLFxuICByZXEsXG4gIHNob3dIaWRkZW5GaWVsZHMsXG4gIHNpYmxpbmdEb2MsXG59OiBQcm9taXNlQXJncyk6IFByb21pc2U8dm9pZD4gPT4ge1xuICBjb25zdCByZXN1bHRpbmdEb2MgPSBzaWJsaW5nRG9jXG4gIGNvbnN0IHBvcHVsYXRlRGVwdGggPSBmaWVsZEhhc01heERlcHRoKGZpZWxkKSAmJiBmaWVsZC5tYXhEZXB0aCA8IGRlcHRoID8gZmllbGQubWF4RGVwdGggOiBkZXB0aFxuICBjb25zdCByb3dQcm9taXNlcyA9IFtdXG5cbiAgaWYgKGZpZWxkU3VwcG9ydHNNYW55KGZpZWxkKSAmJiBmaWVsZC5oYXNNYW55KSB7XG4gICAgaWYgKFxuICAgICAgcmVxLmxvY2FsZSA9PT0gJ2FsbCcgJiZcbiAgICAgIHR5cGVvZiBzaWJsaW5nRG9jW2ZpZWxkLm5hbWVdID09PSAnb2JqZWN0JyAmJlxuICAgICAgc2libGluZ0RvY1tmaWVsZC5uYW1lXSAhPT0gbnVsbFxuICAgICkge1xuICAgICAgT2JqZWN0LmtleXMoc2libGluZ0RvY1tmaWVsZC5uYW1lXSkuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHNpYmxpbmdEb2NbZmllbGQubmFtZV1ba2V5XSkpIHtcbiAgICAgICAgICBzaWJsaW5nRG9jW2ZpZWxkLm5hbWVdW2tleV0uZm9yRWFjaCgocmVsYXRlZERvYywgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJvd1Byb21pc2UgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgIGF3YWl0IHBvcHVsYXRlKHtcbiAgICAgICAgICAgICAgICBjdXJyZW50RGVwdGgsXG4gICAgICAgICAgICAgICAgZGF0YTogc2libGluZ0RvY1tmaWVsZC5uYW1lXVtrZXldW2luZGV4XSxcbiAgICAgICAgICAgICAgICBkYXRhUmVmZXJlbmNlOiByZXN1bHRpbmdEb2MsXG4gICAgICAgICAgICAgICAgZGVwdGg6IHBvcHVsYXRlRGVwdGgsXG4gICAgICAgICAgICAgICAgZmllbGQsXG4gICAgICAgICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgIG92ZXJyaWRlQWNjZXNzLFxuICAgICAgICAgICAgICAgIHJlcSxcbiAgICAgICAgICAgICAgICBzaG93SGlkZGVuRmllbGRzLFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcm93UHJvbWlzZXMucHVzaChyb3dQcm9taXNlKCkpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoc2libGluZ0RvY1tmaWVsZC5uYW1lXSkpIHtcbiAgICAgIHNpYmxpbmdEb2NbZmllbGQubmFtZV0uZm9yRWFjaCgocmVsYXRlZERvYywgaW5kZXgpID0+IHtcbiAgICAgICAgY29uc3Qgcm93UHJvbWlzZSA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICBpZiAocmVsYXRlZERvYykge1xuICAgICAgICAgICAgYXdhaXQgcG9wdWxhdGUoe1xuICAgICAgICAgICAgICBjdXJyZW50RGVwdGgsXG4gICAgICAgICAgICAgIGRhdGE6IHJlbGF0ZWREb2MsXG4gICAgICAgICAgICAgIGRhdGFSZWZlcmVuY2U6IHJlc3VsdGluZ0RvYyxcbiAgICAgICAgICAgICAgZGVwdGg6IHBvcHVsYXRlRGVwdGgsXG4gICAgICAgICAgICAgIGZpZWxkLFxuICAgICAgICAgICAgICBpbmRleCxcbiAgICAgICAgICAgICAgb3ZlcnJpZGVBY2Nlc3MsXG4gICAgICAgICAgICAgIHJlcSxcbiAgICAgICAgICAgICAgc2hvd0hpZGRlbkZpZWxkcyxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcm93UHJvbWlzZXMucHVzaChyb3dQcm9taXNlKCkpXG4gICAgICB9KVxuICAgIH1cbiAgfSBlbHNlIGlmIChcbiAgICB0eXBlb2Ygc2libGluZ0RvY1tmaWVsZC5uYW1lXSA9PT0gJ29iamVjdCcgJiZcbiAgICBzaWJsaW5nRG9jW2ZpZWxkLm5hbWVdICE9PSBudWxsICYmXG4gICAgcmVxLmxvY2FsZSA9PT0gJ2FsbCdcbiAgKSB7XG4gICAgT2JqZWN0LmtleXMoc2libGluZ0RvY1tmaWVsZC5uYW1lXSkuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICBjb25zdCByb3dQcm9taXNlID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCBwb3B1bGF0ZSh7XG4gICAgICAgICAgY3VycmVudERlcHRoLFxuICAgICAgICAgIGRhdGE6IHNpYmxpbmdEb2NbZmllbGQubmFtZV1ba2V5XSxcbiAgICAgICAgICBkYXRhUmVmZXJlbmNlOiByZXN1bHRpbmdEb2MsXG4gICAgICAgICAgZGVwdGg6IHBvcHVsYXRlRGVwdGgsXG4gICAgICAgICAgZmllbGQsXG4gICAgICAgICAga2V5LFxuICAgICAgICAgIG92ZXJyaWRlQWNjZXNzLFxuICAgICAgICAgIHJlcSxcbiAgICAgICAgICBzaG93SGlkZGVuRmllbGRzLFxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgcm93UHJvbWlzZXMucHVzaChyb3dQcm9taXNlKCkpXG4gICAgfSlcblxuICAgIGF3YWl0IFByb21pc2UuYWxsKHJvd1Byb21pc2VzKVxuICB9IGVsc2UgaWYgKHNpYmxpbmdEb2NbZmllbGQubmFtZV0pIHtcbiAgICBhd2FpdCBwb3B1bGF0ZSh7XG4gICAgICBjdXJyZW50RGVwdGgsXG4gICAgICBkYXRhOiBzaWJsaW5nRG9jW2ZpZWxkLm5hbWVdLFxuICAgICAgZGF0YVJlZmVyZW5jZTogcmVzdWx0aW5nRG9jLFxuICAgICAgZGVwdGg6IHBvcHVsYXRlRGVwdGgsXG4gICAgICBmaWVsZCxcbiAgICAgIG92ZXJyaWRlQWNjZXNzLFxuICAgICAgcmVxLFxuICAgICAgc2hvd0hpZGRlbkZpZWxkcyxcbiAgICB9KVxuICB9XG4gIGF3YWl0IFByb21pc2UuYWxsKHJvd1Byb21pc2VzKVxufVxuXG5leHBvcnQgZGVmYXVsdCByZWxhdGlvbnNoaXBQb3B1bGF0aW9uUHJvbWlzZVxuIl0sIm5hbWVzIjpbInBvcHVsYXRlIiwiY3VycmVudERlcHRoIiwiZGF0YSIsImRhdGFSZWZlcmVuY2UiLCJkZXB0aCIsImZpZWxkIiwiaW5kZXgiLCJrZXkiLCJvdmVycmlkZUFjY2VzcyIsInJlcSIsInNob3dIaWRkZW5GaWVsZHMiLCJkYXRhVG9VcGRhdGUiLCJyZWxhdGlvbiIsIkFycmF5IiwiaXNBcnJheSIsInJlbGF0aW9uVG8iLCJyZWxhdGVkQ29sbGVjdGlvbiIsInBheWxvYWQiLCJjb2xsZWN0aW9ucyIsImlkIiwidmFsdWUiLCJyZWxhdGlvbnNoaXBWYWx1ZSIsInNob3VsZFBvcHVsYXRlIiwidG9TdHJpbmciLCJwYXlsb2FkRGF0YUxvYWRlciIsImxvYWQiLCJKU09OIiwic3RyaW5naWZ5IiwidHJhbnNhY3Rpb25JRCIsImNvbmZpZyIsInNsdWciLCJsb2NhbGUiLCJmYWxsYmFja0xvY2FsZSIsIm5hbWUiLCJyZWxhdGlvbnNoaXBQb3B1bGF0aW9uUHJvbWlzZSIsInNpYmxpbmdEb2MiLCJyZXN1bHRpbmdEb2MiLCJwb3B1bGF0ZURlcHRoIiwiZmllbGRIYXNNYXhEZXB0aCIsIm1heERlcHRoIiwicm93UHJvbWlzZXMiLCJmaWVsZFN1cHBvcnRzTWFueSIsImhhc01hbnkiLCJPYmplY3QiLCJrZXlzIiwiZm9yRWFjaCIsInJlbGF0ZWREb2Mi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